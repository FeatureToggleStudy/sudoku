!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/sudoku/",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){o=!0,u=l}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.r(e);var l=[[0,1,2,3,4,5,6,7,8],[9,10,11,12,13,14,15,16,17],[18,19,20,21,22,23,24,25,26],[27,28,29,30,31,32,33,34,35],[36,37,38,39,40,41,42,43,44],[45,46,47,48,49,50,51,52,53],[54,55,56,57,58,59,60,61,62],[63,64,65,66,67,68,69,70,71],[72,73,74,75,76,77,78,79,80]],s=[[0,1,2,9,10,11,18,19,20],[3,4,5,12,13,14,21,22,23],[6,7,8,15,16,17,24,25,26],[27,28,29,36,37,38,45,46,47],[30,31,32,39,40,41,48,49,50],[33,34,35,42,43,44,51,52,53],[54,55,56,63,64,65,72,73,74],[57,58,59,66,67,68,75,76,77],[60,61,62,69,70,71,78,79,80]],f=[[0,9,18,27,36,45,54,63,72],[1,10,19,28,37,46,55,64,73],[2,11,20,29,38,47,56,65,74],[3,12,21,30,39,48,57,66,75],[4,13,22,31,40,49,58,67,76],[5,14,23,32,41,50,59,68,77],[6,15,24,33,42,51,60,69,78],[7,16,25,34,43,52,61,70,79],[8,17,26,35,44,53,62,71,80]],c=function(t,e){return(n=e+1,o(Array(n).keys())).slice(t);var n},d=function(){function t(e){u(this,t),this.data=e}return i(t,[{key:"hasUniqueSolution",value:function(){var t=this.data.reduce(function(t,e){return t.concat(e)},[]),e=this.findCandidates(t),n=this.recurseOverCandidates(e);return n}},{key:"recurseOverCandidates",value:function(t){if(this.isSolved(t))return!0;if(this.isUnsolvable(t))return!1;for(var e=this.getStartIndex(t),n=t[e],r=n.length,o=0,u=0;u<r;u++){var a=n[u],i=this.removeValueFromCandidates(t,e,a);this.recurseOverCandidates(i)&&(o+=1)}return 1===o}},{key:"removeValueFromCandidates",value:function(t,e,n){for(var r=o(t.map(function(t){return o(t)})),u=this.findParents(e),a=u.row,i=u.column,c=u.block,d=[].concat(o(l[a]),o(f[i]),o(s[c])),v=0;v<27;v++){var h=d[v];r[h]=r[h].filter(function(t){return t!==n})}return r[e]=[n],r}},{key:"isSolved",value:function(t){for(var e=0;e<81;e++)if(1!==t[e].length)return!1;return!0}},{key:"isUnsolvable",value:function(t){for(var e=0;e<81;e++)if(0===t[e].length)return!0;return!1}},{key:"getStartIndex",value:function(t){for(var e=-1,n=9,r=0;r<81;r++){var o=t[r].length;if(2===o)return r;o>2&&o<n&&(e=r,n=o)}if(-1===e)throw new Error("Couldn't find a good start index for further solving.");return e}},{key:"segment",value:function(t){for(var e=[[],[],[],[],[],[],[],[],[]],n=[[],[],[],[],[],[],[],[],[]],r=[[],[],[],[],[],[],[],[],[]],o=0;o<81;o++){var u=t[o],a=this.findParents(o),i=a.row,l=a.column,s=a.block;e[i].push(u),n[s].push(u),r[l].push(u)}return{rows:e,blocks:n,columns:r}}},{key:"findParents",value:function(t){var e=~~(t/9),n=t%9;return{block:3*~~(e/3)+~~(n/3),row:e,column:n}}},{key:"findCandidates",value:function(t){for(var e=this.segment(t),n=e.rows,r=e.blocks,o=e.columns,u=[],a=0;a<81;a++){var i=t[a];if(u[a]=[],null!==i)u[a].push(i);else for(var l=this.findParents(a),s=l.row,f=l.column,c=l.block,d=1;d<=9;d++)this.isAvailable(r[c],n[s],o[f],d)&&u[a].push(d)}return u}},{key:"isAvailable",value:function(t,e,n,r){for(var o=0;o<9;o++)if(t[o]===r||e[o]===r||n[o]===r)return!1;return!0}},{key:"getCandidates",value:function(){var t=this.data.reduce(function(t,e){return t.concat(e)},[]),e=this.findCandidates(t);return c(0,8).map(function(t){return c(0,8).map(function(n){return e[9*t+n]})})}}]),t}(),v=[[3,6,1,7,2,5,9,4,8],[5,8,7,9,6,4,2,1,3],[4,9,2,8,3,1,6,5,7],[6,3,8,2,5,9,4,7,1],[1,7,4,6,8,3,5,9,2],[2,5,9,1,4,7,8,3,6],[7,4,6,3,9,2,1,8,5],[9,2,3,5,1,8,7,6,4],[8,1,5,4,7,6,3,2,9]],h=function(){function t(e){u(this,t),this.difficulty=e,this.success=void 0,this.solution=void 0,this.data=void 0,this.solution=this.shuffle(v);var n=20;do{if(this.data=this.solution.map(function(t){return o(t)}),this.removeValues(),new d(this.data).hasUniqueSolution())break}while(--n);this.success=0!==n}return i(t,[{key:"shuffle",value:function(t){for(var e=v.map(function(t){return o(t)}),n=0;n<4200;n++)this.moveRowOrColumn(e);return e}},{key:"succeeded",value:function(){return this.success}},{key:"getPuzzleData",value:function(){var t=this;return this.data.map(function(e,n){return e.map(function(e,r){return[t.solution[n][r],t.solution[n][r]===t.data[n][r]]})})}},{key:"removeValues",value:function(){for(var t=this.difficulty;t;){var e=~~(9*Math.random()),n=~~(9*Math.random());null!==this.data[e][n]&&(this.data[e][n]=null,--t)}}},{key:"moveRowOrColumn",value:function(t){var e=r(this.getFromAndTo(),2),n=e[0],o=e[1];Math.round(Math.random())?this.moveColumn(t,n,o):this.moveRow(t,n,o)}},{key:"getFromAndTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;t=-1===t?Math.floor(3*Math.random()):t;var e=~~(3*Math.random());if(e===t)return this.getFromAndTo(t);var n=~~(3*Math.random());return[3*n+t,3*n+e]}},{key:"moveRow",value:function(t,e,n){var r=t[n];t[n]=t[e],t[e]=r}},{key:"moveColumn",value:function(t,e,n){t.forEach(function(t){var r=t[n];t[n]=t[e],t[e]=r})}}]),t}(),m=self;m.addEventListener("message",function(t){var e=t.data,n=new h(e);if(!n.succeeded())throw new Error("Could not generate puzzle.");var r=n.getPuzzleData();m.postMessage({puzzleData:r,difficulty:e})});e.default=null}]);
//# sourceMappingURL=d1e65d8d5b36ec4850c8.worker.js.map