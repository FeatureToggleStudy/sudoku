!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/sudoku/",r(r.s=0)}([function(t,n,r){"use strict";function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=[],e=!0,o=!1,a=void 0;try{for(var u,i=t[Symbol.iterator]();!(e=(u=i.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(l){o=!0,a=l}finally{try{e||null==i.return||i.return()}finally{if(o)throw a}}return r}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){return function(t){if(Array.isArray(t)){for(var n=0,r=new Array(t.length);n<t.length;n++)r[n]=t[n];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,n,r){return n&&u(t.prototype,n),r&&u(t,r),t}var l;r.r(n),function(t){t[t.VeryEasy=30]="VeryEasy",t[t.Easy=36]="Easy",t[t.Normal=42]="Normal",t[t.Hard=48]="Hard",t[t.VeryHard=54]="VeryHard",t[t.Insane=60]="Insane"}(l||(l={}));var f=function(t,n){return(r=n+1,o(Array(r).keys())).slice(t);var r},s=function(){function t(n){a(this,t),this.data=n}return i(t,[{key:"hasUniqueSolution",value:function(){var t=this.data.reduce(function(t,n){return t.concat(n)},[]);return this.solve(t,!0)===this.solve(t,!1)}},{key:"solve",value:function(t,n){var r=this.findCandidates(t);if(n&&r.forEach(function(t){return t.reverse()}),this.isSolved(r))return r.map(function(t){return t[0]}).join("");if(this.isUnsolvable(r))return"";for(var e=this.getStartIndex(r),a=r[e],u=a.length,i=0;i<u;i++){var l=a[i],f=o(t);f[e]=l;var s=this.solve(f,n);if(s)return s}return""}},{key:"isSolved",value:function(t){for(var n=0;n<81;n++)if(1!==t[n].length)return!1;return!0}},{key:"isUnsolvable",value:function(t){for(var n=0;n<81;n++)if(0===t[n].length)return!0;return!1}},{key:"getStartIndex",value:function(t){for(var n=-1,r=9,e=0;e<81;e++){var o=t[e].length;if(2===o)return e;o>2&&o<r&&(n=e,r=o)}if(-1===n)throw new Error("Couldn't find a good start index for further solving.");return n}},{key:"segment",value:function(t){for(var n=[[],[],[],[],[],[],[],[],[]],r=[[],[],[],[],[],[],[],[],[]],e=[[],[],[],[],[],[],[],[],[]],o=0;o<81;o++){var a=t[o],u=this.findParents(o),i=u.row,l=u.column,f=u.block;n[i].push(a),r[f].push(a),e[l].push(a)}return{rows:n,blocks:r,columns:e}}},{key:"findParents",value:function(t){var n=~~(t/9),r=t%9;return{block:3*~~(n/3)+~~(r/3),row:n,column:r}}},{key:"findCandidates",value:function(t){for(var n=this.segment(t),r=n.rows,e=n.blocks,o=n.columns,a=[],u=0;u<81;u++){var i=t[u];if(a[u]=[],null!==i)a[u].push(i);else for(var l=this.findParents(u),f=l.row,s=l.column,c=l.block,v=1;v<=9;v++)this.isAvailable(e[c],r[f],o[s],v)&&a[u].push(v)}return a}},{key:"isAvailable",value:function(t,n,r,e){for(var o=0;o<9;o++)if(t[o]===e||n[o]===e||r[o]===e)return!1;return!0}},{key:"getCandidates",value:function(){var t=this.data.reduce(function(t,n){return t.concat(n)},[]),n=this.findCandidates(t);return f(0,8).map(function(t){return f(0,8).map(function(r){return n[9*t+r]})})}}]),t}(),c=[[3,6,1,7,2,5,9,4,8],[5,8,7,9,6,4,2,1,3],[4,9,2,8,3,1,6,5,7],[6,3,8,2,5,9,4,7,1],[1,7,4,6,8,3,5,9,2],[2,5,9,1,4,7,8,3,6],[7,4,6,3,9,2,1,8,5],[9,2,3,5,1,8,7,6,4],[8,1,5,4,7,6,3,2,9]],v=function(){function t(n){a(this,t),this.difficulty=n,this.solution=void 0,this.data=void 0,this.solution=this.shuffle(c),this.data=[]}return i(t,[{key:"generate",value:function(){var t=Date.now();this.data=this.solution.map(function(t){return o(t)});for(var n=[],r=1273;n.length<this.difficulty&&r--;){var e=void 0,a=void 0;do{e=~~(9*Math.random()),a=~~(9*Math.random())}while(n.includes("".concat(e,":").concat(a)));var u=this.data[e][a];this.data[e][a]=null,new s(this.data).hasUniqueSolution()?n.push("".concat(e,":").concat(a)):this.data[e][a]=u}var i=Date.now()-t;return r>0?(console.log("It took ".concat(i,"ms to generate a ").concat(l[this.difficulty]," puzzle")),!0):(console.log("Failed to generate a ".concat(l[this.difficulty]," puzzle after ").concat(i,"ms")),!1)}},{key:"shuffle",value:function(t){for(var n=c.map(function(t){return o(t)}),r=0;r<4200;r++)this.moveRowOrColumn(n);return n}},{key:"getPuzzleData",value:function(){var t=this;return this.data.map(function(n,r){return n.map(function(n,e){return[t.solution[r][e],t.solution[r][e]===t.data[r][e]]})})}},{key:"moveRowOrColumn",value:function(t){var n=e(this.getFromAndTo(),2),r=n[0],o=n[1];Math.round(Math.random())?this.moveColumn(t,r,o):this.moveRow(t,r,o)}},{key:"getFromAndTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;t=-1===t?Math.floor(3*Math.random()):t;var n=~~(3*Math.random());if(n===t)return this.getFromAndTo(t);var r=~~(3*Math.random());return[3*r+t,3*r+n]}},{key:"moveRow",value:function(t,n,r){var e=t[r];t[r]=t[n],t[n]=e}},{key:"moveColumn",value:function(t,n,r){t.forEach(function(t){var e=t[r];t[r]=t[n],t[n]=e})}}]),t}(),d=self;d.addEventListener("message",function(t){var n=t.data,r=new v(n);if(!r.generate())throw new Error("Could not generate puzzle.");var e=r.getPuzzleData();d.postMessage({puzzleData:e,difficulty:n})});n.default=null}]);
//# sourceMappingURL=07fe36f1db2aa268f104.worker.js.map