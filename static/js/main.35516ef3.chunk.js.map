{"version":3,"sources":["workers/GeneratePuzzle.worker.ts","serviceWorker.ts","store/types.ts","models/Difficulty.ts","models/Cell.ts","models/Row.ts","models/Analyzer.ts","models/Sudoku.ts","PuzzleStorage.ts","store/reducers.ts","store/index.ts","presentation/SudokuCell.tsx","presentation/SudokuRow.tsx","presentation/Sudoku.tsx","presentation/Numbers.tsx","utils/ServiceWorkerUpdated.ts","presentation/TopBar.tsx","presentation/CompletedDialog.tsx","presentation/App.tsx","theme.ts","store/actions.ts","index.tsx"],"names":["module","exports","Worker","__webpack_require__","p","isLocalhost","Boolean","window","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","concat","fetch","then","response","contentType","headers","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","DIRECTION","MODE","DIFFICULTY","CHANGE_DIFFICULTY","NEW_GAME","VALIDATE_SOLUTION","TOGGLE_CELL","SET_DIGIT","REMOVE_DIGIT","NAVIGATE_CELLS","TOGGLE_NOTE_MODE","UNDO","REDO","TOGGLE_NIGHT_MODE","RESET_SUDOKU","FILL_CANDIDATES","CLEAR_CANDIDATES","NO_NOTES","Cell","previous","Object","classCallCheck","this","value","valid","solution","row","column","given","active","notes","calculateBlock","modifier","cell","digit","mode","Note","map","x","i","n","Row","cells","index","c","validate","setActive","isActive","getColumn","setDigit","removeDigit","clearNotes","data","toConsumableArray","_ref","_ref2","slicedToArray","create","Analyzer","rows","blocks","columns","v","_this$findParents","findParents","block","push","_this$segment","segment","candidates","_this$findParents2","candidate","isAvailable","flatData","reduce","s","findCandidates","result","Sudoku","activeCell","createdAt","sudoku","r","toggleCell","allNumbers","acc","next","getCells","getValue","solved","_loop","filter","length","dirrection","increment","val","decrement","objectSpread","Up","Down","Right","Left","activateCell","every","isSolved","some","sum","getNotes","getCandidates","forEach","rowCandidates","cellCandidates","clearCandidates","Date","now","d","EMPTY_DATA","src_PuzzleStorage","PuzzleStorage","_this","worker","inititializeStorage","GeneratePuzzleWorker","e","addPuzzle","hasLocalStorageKeys","_puzzles","puzzles","defineProperty","VeryEasy","saveJSONPuzzles","Puzzles","Easy","Normal","Hard","VeryHard","save","localStorage","_this2","id","uuid","puzzle","decodedPuzle","difficulty","puzzleMap","load","shift","decodeStoredPuzzle","postMessage","message","puzzleData","key","setItem","JSON","stringify","parse","initialDifficulty","fallBack","getItem","readDifficulty","initialNightMode","readNightMode","initialState","past","current","getPuzzle","future","Input","nightMode","rootReducer","combineReducers","game","arguments","undefined","action","type","payload","toString","force","navigate","direction","SET_MODE","slice","writeNightMode","fillCandidates","SudokuCellComponent","classes","props","react_default","a","createElement","className","container","onClick","handleClick","calculateClasses","renderContent","style","fontSize","size","Math","ceil","cellClasses","note1","note2","note3","note4","note5","note6","note7","note8","note9","Fragment","note","activeNote","inactiveNote","getRow","_result","getBlock","content","thickBorderTop","thickBorderBottom","thickBorderLeft","thickBorderRight","dark","isGiven","invalid","isValid","keys","join","Component","withStyles","theme","borderThin","palette","primary","borderThick","createStyles","display","position","width","paddingBottom","textAlign","userSelect","fontFamily","justifyContent","alignItems","top","right","bottom","left","borderRight","borderBottom","color","grey","borderTop","borderLeft","backgroundColor","light","fontWeight","opacity","contrastText","SudokuRowComponent","sudokuRow","renderRow","SudokuCell","getCellSize","rowSize","SudokuComponent","possibleConstructorReturn","getPrototypeOf","call","containerRef","setCellSize","rowDOM","boundingRectangle","getBoundingClientRect","height","smallestDimmesion","fittedDimmension","floor","setState","requestAnimationFrame","React","createRef","menuAnchor","index_es","cardContent","ref","renderRows","toolbar","toolbarButton","disabled","undo","Undo_default","Clear_default","redo","Redo_default","_this3","getRows","SudokuRow","milliSeconds","pad","num","round","padStart","seconds","minutes","hours","padding","marginLeft","marginRight","@media (orientation: portrait)","spacing","unit","@media (orientation: landscape)","header","headerButton","INumbers","longPressTimeout","clickHandledByLongPress","setTimeout","clearTimeout","countEmptyCells","isNoteMode","showRedProgressBar","Array","isDigitSolved","Chip_default","onMouseDown","mouseDownHandler","onTouchStart","onMouseUp","mouseUpHandler","onTouchEnd","alert","chip","label","progress","bar","errorBar","variant","getProgress","paddingTop","borderBottomRightRadius","borderBottomLeftRadius","successBar","margin","resolvePromise","updateExistsPromise","Promise","resolve","reject","registerUpdate","DIFFICUTIES","TopBar","drawerOpen","difficultyOpen","helpOpen","hasUpdates","ServiceWorkerUpdated","AppBar_default","Toolbar_default","IconButton_default","menuButton","openDrawer","Menu_default","Typography_default","grow","getBarText","FormControlLabel_default","notesToggle","labelPlacement","toggleNightMode","control","Switch_default","checked","Drawer_default","paper","drawerPaper","open","onClose","closeDrawer","drawerHeader","ChevronLeft_default","List_default","drawerList","ListSubheader_default","listHeader","ListItem_default","button","createNewGame","ListItemIcon_default","Casino_default","ListItemText_default","reset","Replay_default","toggleHelp","Help_default","ExpandLess_default","subMenuButton","ExpandMore_default","Collapse_default","in","timeout","unmountOnExit","disablePadding","nested","toggleDifficulty","FitnessCenter_default","renderDifficulties","forceRefresh","SyncProblem_default","modeFab","setMode","EditOutlined_default","Edit_default","option","selected","setDifficulty","changeDifficulty","validateSolution","_this4","find","resetSudoku","getRegistration","clear","_drawerPaper","flexGrow","zIndex","paddingLeft","paddingRight","secondary","main","breakpoints","down","minWidth","up","background","default","textTransform","common","white","ellapsedTime","formatMillisecons","getCreationTimestamp","disableBackdropClick","disableEscapeKeyDown","maxWidth","fullWidth","gutterBottom","difficultyText","App","handleKeyboard","which","navigateCells","t","createMuiTheme","typography","useNextVariants","MuiThemeProvider_default","CssBaseline_default","presentation_TopBar","presentation_Sudoku","Numbers","presentation_CompletedDialog","document","removeEventListener","connect","store","createStore","ReactDOM","render","es","presentation_App","getElementById"],"mappings":"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","file":"static/js/main.35516ef3.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"ff45af37f8444a8bbfa5.worker.js\");\n};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import Sudoku from \"../models/Sudoku\";\r\nimport { DIFFICULTY } from \"../models/Difficulty\";\r\n\r\nexport interface IGameState {\r\n  difficulty: DIFFICULTY;\r\n  sudoku: {\r\n    past: Sudoku[];\r\n    current: Sudoku;\r\n    future: Sudoku[];\r\n  };\r\n  mode: MODE;\r\n  nightMode: boolean;\r\n}\r\n\r\nexport enum DIRECTION {\r\n  Up,\r\n  Down,\r\n  Left,\r\n  Right\r\n}\r\n\r\nexport enum MODE {\r\n  Input,\r\n  Note\r\n}\r\n\r\nexport const CHANGE_DIFFICULTY = \"CHANGE_DIFFICULTY\";\r\nexport const NEW_GAME = \"NEW_GAME\";\r\nexport const VALIDATE_SOLUTION = \"VALIDATE_SOLUTION\";\r\nexport const TOGGLE_CELL = \"TOGGLE_CELLs\";\r\nexport const SET_DIGIT = \"SET_DIGIT\";\r\nexport const REMOVE_DIGIT = \"REMOVE_DIGIT\";\r\nexport const NAVIGATE_CELLS = \"NAVIGATE_CELLS\";\r\nexport const TOGGLE_NOTE_MODE = \"TOGGLE_NOTE_MODE\";\r\nexport const UNDO = \"UNDO\";\r\nexport const REDO = \"REDO\";\r\nexport const TOGGLE_NIGHT_MODE = \"TOGGLE_NIGHT_MODE\";\r\nexport const RESET_SUDOKU = \"RESET_SUDOKU\";\r\nexport const FILL_CANDIDATES = \"FILL_CANDIDATES\";\r\nexport const CLEAR_CANDIDATES = \"CLEAR_CANDIDATES\";\r\n\r\ninterface IChangeDifficultyAction {\r\n  type: typeof CHANGE_DIFFICULTY;\r\n  payload: DIFFICULTY;\r\n}\r\n\r\ninterface INewGameAction {\r\n  type: typeof NEW_GAME;\r\n}\r\n\r\ninterface IValidateSolutionAction {\r\n  type: typeof VALIDATE_SOLUTION;\r\n}\r\n\r\ninterface IToggleCellAction {\r\n  type: typeof TOGGLE_CELL;\r\n  payload: {\r\n    row: number;\r\n    column: number;\r\n  }\r\n}\r\n\r\ninterface ISetDigitAction {\r\n  type: typeof SET_DIGIT;\r\n  payload: {\r\n    digit: number;\r\n    force: boolean;\r\n  }\r\n}\r\n\r\ninterface IRemoveDigitAction {\r\n  type: typeof REMOVE_DIGIT;\r\n}\r\n\r\ninterface INavigateCellsAction {\r\n  type: typeof NAVIGATE_CELLS;\r\n  payload: {\r\n    direction: DIRECTION;\r\n  }\r\n}\r\n\r\ninterface ISetModeAction {\r\n  type: typeof TOGGLE_NOTE_MODE;\r\n  payload: {\r\n    mode: MODE\r\n  }\r\n}\r\ninterface IUndoAction {\r\n  type: typeof UNDO;\r\n}\r\ninterface IRedoAction {\r\n  type: typeof REDO;\r\n}\r\ninterface IToggleNightModeAction {\r\n  type: typeof TOGGLE_NIGHT_MODE;\r\n}\r\n\r\ninterface IResetSudokuAction {\r\n  type: typeof RESET_SUDOKU;\r\n}\r\n\r\ninterface IFillCandidatesAction {\r\n  type: typeof FILL_CANDIDATES;\r\n}\r\n\r\ninterface IClearCandidatesAction {\r\n  type: typeof CLEAR_CANDIDATES;\r\n}\r\n\r\nexport type OptionActions = IChangeDifficultyAction\r\n  | INewGameAction\r\n  | IValidateSolutionAction\r\n  | IToggleCellAction\r\n  | ISetDigitAction\r\n  | IRemoveDigitAction\r\n  | INavigateCellsAction\r\n  | ISetModeAction\r\n  | IUndoAction\r\n  | IRedoAction\r\n  | IToggleNightModeAction\r\n  | IResetSudokuAction\r\n  | IFillCandidatesAction\r\n  | IClearCandidatesAction;","\r\nexport enum DIFFICULTY {\r\n  VeryEasy = 30,\r\n  Easy = 36,\r\n  Normal = 42,\r\n  Hard = 50,\r\n  VeryHard = 57\r\n}","import { MODE } from \"../store/types\";\r\n\r\nconst NO_NOTES = [false, false, false, false, false, false, false, false, false];\r\n\r\nexport default class Cell {\r\n  private value: number | null;\r\n  private valid: boolean;\r\n  private solution: number;\r\n  private row: number;\r\n  private column: number;\r\n  private given: boolean;\r\n  private active: boolean;\r\n  private notes: boolean[];\r\n\r\n  private constructor(previous?: Cell) {\r\n    this.value = previous ? previous.value : null;\r\n    this.solution = previous ? previous.solution : -1;\r\n    this.row = previous ? previous.row : -1;\r\n    this.column = previous ? previous.column : -1;\r\n    this.given = previous ? previous.given : false;\r\n    this.active = previous ? previous.active : false;\r\n    this.valid = previous ? previous.valid : true;\r\n    this.notes = previous ? previous.notes : [...NO_NOTES];\r\n  }\r\n\r\n  static create(solution: number, row: number, column: number, given: boolean): Cell {\r\n    const cell = new Cell();\r\n    cell.solution = solution;\r\n    cell.row = row;\r\n    cell.column = column;\r\n    cell.given = given;\r\n    cell.value = given ? solution : null;\r\n    return cell;\r\n  }\r\n\r\n  public getSolution(): number {\r\n    return this.solution;\r\n  }\r\n\r\n  public getValue(): number | null {\r\n    return this.value;\r\n  }\r\n\r\n  public getRow(): number {\r\n    return this.row;\r\n  }\r\n\r\n  public getColumn(): number {\r\n    return this.column;\r\n  }\r\n\r\n  public isActive(): boolean {\r\n    return this.active;\r\n  }\r\n\r\n  public getBlock(): number {\r\n    if (this.row <= 3) {\r\n      return this.calculateBlock(0);\r\n    } else if (this.row >= 4 && this.row <= 6) {\r\n      return this.calculateBlock(1);\r\n    } else {\r\n      return this.calculateBlock(2);\r\n    }\r\n  }\r\n\r\n  private calculateBlock(modifier: number): number {\r\n    if (this.column <= 3) {\r\n      return modifier + 1;\r\n    } else if (this.column >= 4 && this.column <= 6) {\r\n      return modifier + 2;\r\n    } else {\r\n      return modifier + 3;\r\n    }\r\n  }\r\n\r\n  public isGiven(): boolean {\r\n    return this.given;\r\n  }\r\n\r\n  public validate(): Cell {\r\n    const cell = new Cell(this)\r\n    cell.valid = this.value === null || this.value === this.solution;\r\n    if (!cell.valid) {\r\n      cell.active = false;\r\n    }\r\n    return cell;\r\n  }\r\n\r\n  public isValid(): boolean {\r\n    return this.valid;\r\n  }\r\n\r\n  public setActive(active: boolean): Cell {\r\n    const cell = new Cell(this);\r\n    cell.active = active;\r\n    return cell;\r\n  }\r\n\r\n  public setDigit(digit: number, mode: MODE): Cell {\r\n    if (!this.active || this.given) {\r\n      return this;\r\n    }\r\n    const cell = new Cell(this);\r\n    if (mode === MODE.Note) {\r\n      cell.notes = this.notes.map((x, i) => i === (digit - 1) ? !x : x)\r\n      cell.value = null\r\n    } else {\r\n      cell.value = this.value === digit ? null : digit;\r\n    }\r\n    cell.valid = true;\r\n    return cell;\r\n  }\r\n\r\n  public removeDigit(): Cell {\r\n    if (!this.active || this.given) {\r\n      return this;\r\n    }\r\n    const cell = new Cell(this);\r\n    cell.notes = [...NO_NOTES];\r\n    cell.value = null;\r\n    cell.valid = true;\r\n    return cell;\r\n  }\r\n\r\n  public isSolved(): boolean {\r\n    return this.value === this.solution;\r\n  }\r\n\r\n  public getNotes(): boolean[] {\r\n    return this.notes;\r\n  }\r\n\r\n  public clearNotes(): Cell {\r\n    const cell = new Cell(this);\r\n    cell.notes = cell.notes.map(n => false);\r\n    return cell;\r\n  }\r\n}\r\n","import Cell from \"./Cell\";\r\nimport { DIRECTION, MODE } from \"../store/types\";\r\n\r\nexport default class Row {\r\n  private cells: Cell[];\r\n  private index: number;\r\n  private active: boolean;\r\n\r\n  private constructor(previous?: Row) {\r\n    this.index = previous ? previous.index : -1;\r\n    this.active = previous ? previous.active : false;\r\n    this.cells = previous ? previous.cells : [];\r\n  }\r\n\r\n  static create(data: [number, boolean][], index: number): Row {\r\n    const row = new Row();\r\n    row.cells = [...data.map(([value, given], i) => Cell.create(value, index, i + 1, given))];\r\n    row.index = index;\r\n    return row;\r\n  }\r\n\r\n  public getCells(): Cell[] {\r\n    return this.cells;\r\n  }\r\n\r\n  public validate(): Row {\r\n    const row = new Row(this);\r\n    row.cells = this.cells.map(c => c.validate());\r\n    return row;\r\n  }\r\n\r\n  public getIndex(): number {\r\n    return this.index;\r\n  }\r\n\r\n  public toggleCell(index: number, column: number): Row {\r\n    if (this.index !== index && !this.active) {\r\n      return this;\r\n    }\r\n    const row = new Row(this);\r\n\r\n    if (this.active) {\r\n      if (this.index === index) {\r\n        row.cells = this.cells.map(c => {\r\n          return c.setActive(c.isActive() ? false : c.getColumn() === column);\r\n        });\r\n      } else {\r\n        row.active = false;\r\n        row.cells = this.cells.map(c => c.isActive() ? c.setActive(false) : c);\r\n      }\r\n    } else if (this.index === index) {\r\n      row.active = true;\r\n      row.cells = this.cells.map(c => c.getColumn() === column ? c.setActive(true) : c);\r\n    }\r\n    return row;\r\n  }\r\n\r\n  public isActive(): boolean {\r\n    return this.active;\r\n  }\r\n\r\n  public setDigit(digit: number, mode: MODE): Row {\r\n    if (!this.active) {\r\n      return this;\r\n    }\r\n    const row = new Row(this);\r\n    row.cells = this.cells.map(c => c.setDigit(digit, mode));\r\n    return row;\r\n  }\r\n\r\n  public removeDigit(): Row {\r\n    if (!this.active) {\r\n      return this;\r\n    }\r\n    const row = new Row(this);\r\n    row.cells = this.cells.map(c => c.removeDigit());\r\n    return row;\r\n  }\r\n\r\n  public clearCandidates(): Row {\r\n    const row = new Row(this);\r\n    row.cells = this.cells.map(c => c.clearNotes());\r\n    return row;\r\n  }\r\n\r\n}\r\n","export default class Analyzer {\r\n  constructor(private data: nullber[][]) {\r\n\r\n  }\r\n\r\n  private segment<T>(data: T[]): segments<T> {\r\n    const rows: T[][] = [[], [], [], [], [], [], [], [], []]\r\n    const blocks: T[][] = [[], [], [], [], [], [], [], [], []]\r\n    const columns: T[][] = [[], [], [], [], [], [], [], [], []]\r\n\r\n    for (let i = 0; i < 81; i++) {\r\n      const v = data[i]\r\n      const { row, column, block } = this.findParents(i);\r\n      rows[row].push(v)\r\n      blocks[block].push(v)\r\n      columns[column].push(v)\r\n    }\r\n\r\n    return {\r\n      rows,\r\n      blocks,\r\n      columns\r\n    }\r\n  }\r\n\r\n  private findParents(index: number): { row: number, column: number, block: number } {\r\n    const row = ~~(index / 9);\r\n    const column = index % 9\r\n    const block = ~~(row / 3) * 3 + ~~(column / 3)\r\n\r\n    return {\r\n      block,\r\n      row,\r\n      column\r\n    }\r\n  }\r\n\r\n  private findCandidates(data: nullber[]) {\r\n    const { rows, blocks, columns } = this.segment(data)\r\n    const candidates: number[][] = []\r\n    for (let i = 0; i < 81; i++) {\r\n      const value = data[i];\r\n      candidates[i] = [];\r\n      if (value !== null) {\r\n        candidates[i].push(value);\r\n      } else {\r\n        const { row, column, block } = this.findParents(i)\r\n        for (let candidate = 1; candidate <= 9; candidate++) {\r\n          if (this.isAvailable(blocks[block], rows[row], columns[column], candidate)) {\r\n            candidates[i].push(candidate);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return candidates;\r\n  }\r\n\r\n  private isAvailable(block: nullber[], row: nullber[], column: nullber[], value: number): boolean {\r\n    for (let i = 0; i < 9; i++) {\r\n      if (block[i] === value || row[i] === value || column[i] === value) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  public getCandidates(): number[][][] {\r\n    const flatData = this.data.reduce((s, x) => s.concat(x), []);\r\n    const candidates = this.findCandidates(flatData);\r\n    const result = [] as number[][][]\r\n    for (let row = 0; row < 9; row++) {\r\n      result[row] = []\r\n      for (let column = 0; column < 9; column++) {\r\n        result[row][column] = candidates[row * 9 + column]\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\ntype nullber = number | null\r\n\r\ntype segments<T> = {\r\n  rows: T[][]\r\n  blocks: T[][]\r\n  columns: T[][]\r\n}\r\n","import Row from \"./Row\";\r\nimport { DIRECTION, MODE } from \"../store/types\";\r\nimport Cell from \"./Cell\";\r\nimport Analyzer from \"./Analyzer\";\r\n\r\nexport default class Sudoku {\r\n  private rows: Row[];\r\n  private activeCell: { row: number, column: number };\r\n  private createdAt: number;\r\n\r\n  private constructor(previous?: Sudoku) {\r\n    this.rows = previous ? previous.rows : [];\r\n    this.activeCell = previous ? previous.activeCell : { row: -1, column: -1 }\r\n    this.createdAt = previous ? previous.createdAt : 0;\r\n  }\r\n\r\n  static create(data: ([number, boolean])[][]): Sudoku {\r\n    const sudoku = new Sudoku();\r\n    sudoku.createdAt = Date.now();\r\n    sudoku.rows = data.map((d, i) => Row.create(d, i + 1));\r\n    return sudoku\r\n  }\r\n\r\n  public getRows(): Row[] {\r\n    return this.rows;\r\n  }\r\n\r\n  public validate(): Sudoku {\r\n    const sudoku = new Sudoku(this)\r\n    sudoku.rows = this.rows.map(r => r.validate());\r\n    return sudoku;\r\n  }\r\n\r\n  public activateCell(row: number, column: number): Sudoku {\r\n    const sudoku = new Sudoku(this)\r\n    if (sudoku.activeCell.row === row && sudoku.activeCell.column === column) {\r\n      sudoku.activeCell = { row: -1, column: -1 }\r\n    } else {\r\n      sudoku.activeCell = { row, column };\r\n    }\r\n    sudoku.rows = this.rows.map(r => r.toggleCell(row, column));\r\n    return sudoku;\r\n  }\r\n\r\n  public setDigit(digit: number, mode: MODE): Sudoku {\r\n    const sudoku = new Sudoku(this);\r\n    sudoku.rows = this.rows.map(r => r.setDigit(digit, mode));\r\n    return sudoku;\r\n  }\r\n\r\n  public removeDigit(): Sudoku {\r\n    const sudoku = new Sudoku(this);\r\n    sudoku.rows = this.rows.map(r => r.removeDigit());\r\n    return sudoku;\r\n  }\r\n\r\n  public getSolvedNumbers(): number[] {\r\n    const allNumbers = this.rows.reduce((acc: number[], next: Row) =>\r\n      acc.concat(next.getCells().map(c => c.getValue() || 0), []),\r\n      []\r\n    );\r\n    const solved = []\r\n    for (let i = 1; i <= 9; i++) {\r\n      if (allNumbers.filter(n => n === i).length === 9) {\r\n        solved.push(i);\r\n      }\r\n    }\r\n    return solved;\r\n  }\r\n\r\n  public navigate(dirrection: DIRECTION): Sudoku {\r\n    const increment = (val: number) => val === 9 ? 1 : val + 1;\r\n    const decrement = (val: number) => val === 1 ? 9 : val - 1;\r\n    const activeCell = { ...this.activeCell }\r\n\r\n    switch (dirrection) {\r\n      case DIRECTION.Up:\r\n        activeCell.row = decrement(activeCell.row);\r\n        break;\r\n      case DIRECTION.Down:\r\n        activeCell.row = increment(activeCell.row);\r\n        break;\r\n      case DIRECTION.Right:\r\n        activeCell.column = increment(activeCell.column);\r\n        break;\r\n      case DIRECTION.Left:\r\n        activeCell.column = decrement(activeCell.column);\r\n        break;\r\n    }\r\n    return this.activateCell(activeCell.row, activeCell.column);\r\n  }\r\n\r\n  public isSolved(): boolean {\r\n    return this.rows.every(r => r.getCells().every(c => c.isSolved()))\r\n  }\r\n\r\n  public getCreationTimestamp(): number {\r\n    return this.createdAt;\r\n  }\r\n\r\n  public isDigitSolved(digit: number): boolean {\r\n    return this.rows.every(r => r.getCells().some(c => c.getValue() === digit && c.isSolved()));\r\n  }\r\n\r\n  public countEmptyCells(): number {\r\n    const cells = this.rows.reduce((acc, row) => acc.concat(row.getCells()), [] as Cell[])\r\n    return cells.reduce((sum, cell) => {\r\n      if (cell.getValue() === null) {\r\n        return sum + 1;\r\n      }\r\n      return sum;\r\n    }, 0)\r\n  }\r\n\r\n  public fillCandidates(): Sudoku {\r\n    const notes = this.rows.map(r => r.getCells().map(c => c.getNotes()))\r\n    const data = this.rows.map(r => r.getCells().map(c => c.getValue()))\r\n    const analyzer = new Analyzer(data)\r\n    const candidates = analyzer.getCandidates()\r\n    let sudoku = new Sudoku(this);\r\n    if (sudoku.activeCell.row !== -1 && sudoku.activeCell.column !== -1) {\r\n      sudoku = sudoku.activateCell(sudoku.activeCell.row, sudoku.activeCell.column)\r\n    }\r\n    candidates.forEach((rowCandidates, row) => {\r\n      rowCandidates.forEach((cellCandidates, cell) => {\r\n        sudoku = sudoku.activateCell(row + 1, cell + 1)\r\n        cellCandidates.forEach(candidate => {\r\n          if (data[row][cell] === null && !notes[row][cell][candidate - 1]) {\r\n            sudoku = sudoku.setDigit(candidate, MODE.Note)\r\n          }\r\n        })\r\n      })\r\n    })\r\n    return sudoku;\r\n  }\r\n\r\n  public clearCandidates(): Sudoku {\r\n    const sudoku = new Sudoku(this);\r\n    sudoku.rows = sudoku.rows.map(row => row.clearCandidates())\r\n    return sudoku;\r\n  }\r\n}\r\n","\r\nimport Puzzles from \"./puzzles.json\"\r\nimport { DIFFICULTY } from \"./models/Difficulty\";\r\nimport Sudoku from \"./models/Sudoku\";\r\nimport GeneratePuzzleWorker from \"./workers/GeneratePuzzle.worker\"\r\nimport { v4 as uuid } from \"uuid\"\r\n\r\nconst EMPTY_DATA: [number, boolean][][] = [\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]],\r\n  [[1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false], [1, false]]\r\n]\r\n\r\nconst PUZZLE_MAP_KEY = \"PUZZLE-MAP\"\r\nconst BUFFER_SIZE = 20\r\n\r\ntype idMap = { [key: number]: string[] }\r\ntype serializedPuzzle = (number | boolean)[][][]\r\n\r\nclass PuzzleStorage {\r\n  private worker: Worker;\r\n\r\n  constructor() {\r\n    this.inititializeStorage()\r\n    this.worker = new GeneratePuzzleWorker() as Worker;\r\n    this.worker.addEventListener('message', e => this.addPuzzle(e))\r\n  }\r\n\r\n  private inititializeStorage() {\r\n    if (!this.hasLocalStorageKeys()) {\r\n      const puzzles: idMap = {\r\n        [DIFFICULTY.VeryEasy]: this.saveJSONPuzzles(Puzzles.VeryEasy),\r\n        [DIFFICULTY.Easy]: this.saveJSONPuzzles(Puzzles.Easy),\r\n        [DIFFICULTY.Normal]: this.saveJSONPuzzles(Puzzles.Normal),\r\n        [DIFFICULTY.Hard]: this.saveJSONPuzzles(Puzzles.Hard),\r\n        [DIFFICULTY.VeryHard]: this.saveJSONPuzzles(Puzzles.VeryHard)\r\n      }\r\n      this.save(PUZZLE_MAP_KEY, puzzles)\r\n    }\r\n  }\r\n\r\n  private hasLocalStorageKeys(): boolean {\r\n    return !!window.localStorage[PUZZLE_MAP_KEY]\r\n  }\r\n\r\n  private saveJSONPuzzles(puzzles: serializedPuzzle[]): string[] {\r\n    return puzzles.map(p => {\r\n      const id = uuid();\r\n      this.save(id, p)\r\n      return id;\r\n    })\r\n  }\r\n\r\n  private decodeStoredPuzzle(puzzle: serializedPuzzle): Sudoku {\r\n    const decodedPuzle = [[], [], [], [], [], [], [], [], []] as [number, boolean][][];\r\n    puzzle.forEach((row, i) => {\r\n      decodedPuzle[i] = row.map(([value, given]) => [value, given] as [number, boolean])\r\n    })\r\n    return Sudoku.create(decodedPuzle)\r\n  }\r\n\r\n  public getPuzzle(difficulty: DIFFICULTY): Sudoku {\r\n    const puzzleMap = this.load<idMap>(PUZZLE_MAP_KEY);\r\n    const id = puzzleMap[difficulty].shift()\r\n    if (!id) {\r\n      return Sudoku.create(EMPTY_DATA)\r\n    }\r\n    const puzzle = this.load<serializedPuzzle>(id)\r\n    const sudoku = this.decodeStoredPuzzle(puzzle)\r\n    this.save(PUZZLE_MAP_KEY, puzzleMap);\r\n    this.worker.postMessage(difficulty)\r\n\r\n    if (!!sudoku) {\r\n      return sudoku\r\n    }\r\n    return Sudoku.create(EMPTY_DATA)\r\n  }\r\n\r\n  private addPuzzle(message: MessageEvent): void {\r\n    const difficulty = message.data.difficulty as DIFFICULTY;\r\n    const data = message.data.puzzleData as [number, boolean][][];\r\n    const id = uuid();\r\n    const puzzleMap = this.load<idMap>(PUZZLE_MAP_KEY);\r\n    puzzleMap[difficulty].push(id);\r\n    this.save(id, data)\r\n    this.save(PUZZLE_MAP_KEY, puzzleMap)\r\n    if (puzzleMap[difficulty].length < BUFFER_SIZE) {\r\n      this.worker.postMessage(difficulty)\r\n    }\r\n  }\r\n\r\n  private save(key: string, data: any): void {\r\n    window.localStorage.setItem(key, JSON.stringify(data))\r\n  }\r\n\r\n  private load<T>(key: string): T {\r\n    return JSON.parse(window.localStorage[key]) as T\r\n  }\r\n}\r\n\r\nexport default new PuzzleStorage();","import {\r\n  IGameState,\r\n  OptionActions,\r\n  CHANGE_DIFFICULTY,\r\n  NEW_GAME,\r\n  VALIDATE_SOLUTION,\r\n  TOGGLE_CELL,\r\n  SET_DIGIT,\r\n  NAVIGATE_CELLS,\r\n  REMOVE_DIGIT,\r\n  TOGGLE_NOTE_MODE as SET_MODE,\r\n  UNDO,\r\n  REDO,\r\n  MODE,\r\n  TOGGLE_NIGHT_MODE,\r\n  RESET_SUDOKU,\r\n  FILL_CANDIDATES,\r\n  CLEAR_CANDIDATES\r\n} from \"./types\";\r\nimport { DIFFICULTY } from \"../models/Difficulty\";\r\nimport PuzzleStorage from \"../PuzzleStorage\"\r\n\r\n\r\nconst initialDifficulty = readDifficulty(DIFFICULTY.Easy)\r\nconst initialNightMode = readNightMode(false);\r\nconst initialState: IGameState = {\r\n  difficulty: initialDifficulty,\r\n  sudoku: {\r\n    past: [],\r\n    current: PuzzleStorage.getPuzzle(initialDifficulty).activateCell(1, 1),\r\n    future: []\r\n  },\r\n  mode: MODE.Input,\r\n  nightMode: initialNightMode\r\n};\r\n\r\nexport function gameReducer(state = initialState, action: OptionActions): IGameState {\r\n  switch (action.type) {\r\n    case CHANGE_DIFFICULTY:\r\n      writeDifficulty(action.payload);\r\n      return {\r\n        ...state,\r\n        difficulty: action.payload,\r\n        sudoku: {\r\n          past: [],\r\n          current: PuzzleStorage.getPuzzle(action.payload).activateCell(1, 1),\r\n          future: []\r\n        }\r\n      };\r\n    case NEW_GAME:\r\n\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [],\r\n          current: PuzzleStorage.getPuzzle(state.difficulty).activateCell(1, 1),\r\n          future: []\r\n        }\r\n      };\r\n    case VALIDATE_SOLUTION:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          ...state.sudoku,\r\n          current: state.sudoku.current.validate()\r\n        }\r\n      };\r\n    case TOGGLE_CELL:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          ...state.sudoku,\r\n          current: state.sudoku.current.activateCell(action.payload.row, action.payload.column)\r\n        }\r\n      };\r\n    case SET_DIGIT:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [...state.sudoku.past, state.sudoku.current],\r\n          current: state.sudoku.current.setDigit(action.payload.digit, action.payload.force ? MODE.Input : state.mode),\r\n          future: []\r\n        }\r\n      };\r\n    case REMOVE_DIGIT:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [...state.sudoku.past, state.sudoku.current],\r\n          current: state.sudoku.current.removeDigit(),\r\n          future: []\r\n        }\r\n      };\r\n    case NAVIGATE_CELLS:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          ...state.sudoku,\r\n          current: state.sudoku.current.navigate(action.payload.direction)\r\n        }\r\n      };\r\n    case SET_MODE:\r\n      return {\r\n        ...state,\r\n        mode: action.payload.mode\r\n      };\r\n    case UNDO:\r\n      if (!state.sudoku.past.length) {\r\n        return state;\r\n      }\r\n      const previous = state.sudoku.past.slice(-1)[0];\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: state.sudoku.past.slice(0, -1),\r\n          current: previous,\r\n          future: [...state.sudoku.future, state.sudoku.current]\r\n        }\r\n      }\r\n    case REDO:\r\n      if (!state.sudoku.future.length) {\r\n        return state;\r\n      }\r\n      const next = state.sudoku.future.slice(-1)[0];\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [...state.sudoku.past, state.sudoku.current],\r\n          current: next,\r\n          future: state.sudoku.future.slice(0, -1)\r\n        }\r\n      }\r\n    case TOGGLE_NIGHT_MODE:\r\n      const nightMode = !state.nightMode;\r\n      writeNightMode(nightMode);\r\n      return {\r\n        ...state,\r\n        nightMode\r\n      }\r\n    case RESET_SUDOKU:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [],\r\n          current: state.sudoku.past.shift() || state.sudoku.current,\r\n          future: []\r\n        }\r\n      }\r\n    case FILL_CANDIDATES:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [...state.sudoku.past, state.sudoku.current],\r\n          current: state.sudoku.current.fillCandidates(),\r\n          future: []\r\n        }\r\n      }\r\n    case CLEAR_CANDIDATES:\r\n      return {\r\n        ...state,\r\n        sudoku: {\r\n          past: [...state.sudoku.past, state.sudoku.current],\r\n          current: state.sudoku.current.clearCandidates(),\r\n          future: []\r\n        }\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction readDifficulty(fallBack: DIFFICULTY): DIFFICULTY {\r\n  const data = window.localStorage.getItem('DIFFICULTY');\r\n  if (!data) {\r\n    return fallBack;\r\n  }\r\n  return +data as DIFFICULTY;\r\n}\r\nfunction writeDifficulty(difficulty: DIFFICULTY) {\r\n  window.localStorage.setItem('DIFFICULTY', difficulty.toString());\r\n}\r\n\r\nfunction readNightMode(fallBack: boolean): boolean {\r\n  const data = window.localStorage.getItem('NIGHT_MODE');\r\n  if (!data) {\r\n    return fallBack;\r\n  }\r\n  return data === 'true';\r\n}\r\nfunction writeNightMode(nightMode: boolean) {\r\n  window.localStorage.setItem('NIGHT_MODE', nightMode.toString());\r\n}","import \"typeface-roboto\";\r\nimport { createStore, combineReducers } from \"redux\";\r\n\r\nimport { gameReducer } from \"./reducers\";\r\n\r\nconst rootReducer = combineReducers({\r\n  game: gameReducer,\r\n});\r\n\r\nexport type AppState = ReturnType<typeof rootReducer>;\r\n\r\nexport default function configureStore() {\r\n  const store = createStore(\r\n    rootReducer\r\n  );\r\n\r\n  return store;\r\n}\r\n","import React, { Component, CSSProperties } from \"react\";\r\nimport Cell from \"../models/Cell\";\r\nimport { toggleCell } from \"../store/actions\";\r\nimport { createStyles, Theme, WithStyles, withStyles } from \"@material-ui/core\";\r\nimport { MODE } from \"../store/types\";\r\n\r\nconst styles = (theme: Theme) => {\r\n  const borderThin = `solid 1px ${theme.palette.primary.dark}`;\r\n  const borderThick = `solid 2px ${theme.palette.primary.dark}`;\r\n\r\n  return createStyles({\r\n    container: {\r\n      display: 'flex',\r\n      position: 'relative',\r\n      width: '11.111111%',\r\n      paddingBottom: '11.111111%',\r\n      textAlign: 'center',\r\n      userSelect: \"none\",\r\n      fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif'\r\n    },\r\n    content: {\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      position: 'absolute',\r\n      top: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      borderRight: borderThin,\r\n      borderBottom: borderThin,\r\n      color: theme.palette.type === \"dark\" ? theme.palette.grey[400] : theme.palette.primary.dark\r\n    },\r\n    thickBorderTop: {\r\n      borderTop: borderThick\r\n    },\r\n    thickBorderBottom: {\r\n      borderBottom: borderThick\r\n    },\r\n    thickBorderLeft: {\r\n      borderLeft: borderThick\r\n    },\r\n    thickBorderRight: {\r\n      borderRight: borderThick\r\n    },\r\n    dark: {\r\n      backgroundColor: theme.palette.type === \"dark\" ? theme.palette.primary.light : theme.palette.grey[200],\r\n    },\r\n    given: {\r\n      fontWeight: 'bold'\r\n    },\r\n    note: {\r\n      position: 'absolute'\r\n    },\r\n    inactiveNote: {\r\n      opacity: 0.1\r\n    },\r\n    activeNote: {\r\n      opacity: 1,\r\n    },\r\n    note1: {\r\n      top: 0,\r\n      left: 0,\r\n      bottom: '66.666667%',\r\n      right: '66.666667%'\r\n    },\r\n    note2: {\r\n      top: \"0\",\r\n      left: \"33.333333%\",\r\n      bottom: \"66.666667%\",\r\n      right: \"33.333333%\",\r\n    },\r\n    note3: {\r\n      top: \"0\",\r\n      left: \"66.666667%\",\r\n      bottom: \"66.666667%\",\r\n      right: \"0\",\r\n    },\r\n    note4: {\r\n      top: \"33.333333%\",\r\n      left: \"0\",\r\n      bottom: \"33.333333%\",\r\n      right: \"66.666667%\",\r\n    },\r\n    note5: {\r\n      top: \"33.333333%\",\r\n      left: \"33.333333%\",\r\n      bottom: \"33.333333%\",\r\n      right: \"33.333333%\",\r\n    },\r\n    note6: {\r\n      top: \"33.333333%\",\r\n      left: \"66.666667%\",\r\n      bottom: \"33.333333%\",\r\n      right: \"0\",\r\n    },\r\n    note7: {\r\n      top: \"66.666667%\",\r\n      left: \"0\",\r\n      bottom: \"0\",\r\n      right: \"66.666667%\",\r\n    },\r\n    note8: {\r\n      top: \"66.666667%\",\r\n      left: \"33.333333%\",\r\n      bottom: \"0\",\r\n      right: \"33.333333%\",\r\n    },\r\n    note9: {\r\n      top: \"66.666667%\",\r\n      left: \"66.666667%\",\r\n      bottom: \"0\",\r\n      right: \"0\",\r\n    },\r\n    invalid: {\r\n      backgroundColor: theme.palette.error.light,\r\n      color: theme.palette.error.contrastText\r\n    },\r\n    active: {\r\n      backgroundColor: theme.palette.type === \"dark\" ? theme.palette.primary.dark : theme.palette.primary.light,\r\n      color: theme.palette.primary.contrastText,\r\n    }\r\n  });\r\n}\r\n\r\nexport interface ISudokuCellComponentProps extends WithStyles<typeof styles> {\r\n  cell: Cell;\r\n  size: number;\r\n  toggleCell: typeof toggleCell;\r\n  mode: MODE;\r\n}\r\n\r\nclass SudokuCellComponent extends Component<ISudokuCellComponentProps> {\r\n\r\n  public render(): JSX.Element {\r\n    const { classes } = this.props;\r\n    return (\r\n      <div className={classes.container} onClick={() => this.handleClick()}>\r\n        <div className={this.calculateClasses()}>\r\n          {this.renderContent()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderContent(): JSX.Element {\r\n    const { classes } = this.props;\r\n    const value = this.props.cell.getValue();\r\n    if (!!value) {\r\n      return (\r\n        <span style={{ fontSize: `${this.props.size}px` }}>{value}</span>\r\n      );\r\n    }\r\n    const notes = this.props.cell.getNotes();\r\n    const fontSize = `${Math.ceil((this.props.size / 3))}px`;\r\n    const cellClasses = [\r\n      classes.note1,\r\n      classes.note2,\r\n      classes.note3,\r\n      classes.note4,\r\n      classes.note5,\r\n      classes.note6,\r\n      classes.note7,\r\n      classes.note8,\r\n      classes.note9\r\n    ];\r\n    return (\r\n      <React.Fragment>\r\n        {\r\n          notes.map((x, i) => (\r\n            <span className={`${classes.note} ${cellClasses[i]} ${x ? classes.activeNote : classes.inactiveNote}`}\r\n              key={i}\r\n              style={{ fontSize: fontSize }}>\r\n              {(x || this.props.mode === MODE.Note) ? i + 1 : ''}\r\n            </span>\r\n          ))\r\n        }\r\n      </React.Fragment >\r\n    );\r\n  }\r\n\r\n  private handleClick(): void {\r\n    this.props.toggleCell(this.props.cell.getRow(), this.props.cell.getColumn())\r\n  }\r\n\r\n  private calculateClasses(): string {\r\n    const { classes } = this.props;\r\n    const cell = this.props.cell;\r\n    const row = cell.getRow();\r\n    const column = cell.getColumn();\r\n    const block = cell.getBlock();\r\n\r\n    const result = {\r\n      [classes.content]: true,\r\n      [classes.thickBorderTop]: row === 1,\r\n      [classes.thickBorderBottom]: row % 3 === 0,\r\n      [classes.thickBorderLeft]: column === 1,\r\n      [classes.thickBorderRight]: column % 3 === 0,\r\n      [classes.dark]: block % 2 === 0,\r\n      [classes.given]: cell.isGiven(),\r\n      [classes.invalid]: !cell.isValid(),\r\n      [classes.active]: cell.isActive(),\r\n    }\r\n    return Object.keys(result).filter(key => result[key]).join(' ');\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SudokuCellComponent);","import React, { Component } from \"react\";\r\nimport Row from \"../models/Row\";\r\nimport SudokuCell from \"./SudokuCell\";\r\nimport { createStyles, Theme, WithStyles, withStyles } from \"@material-ui/core\";\r\nimport { toggleCell } from \"../store/actions\";\r\nimport { MODE } from \"../store/types\";\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  sudokuRow: {\r\n    display: 'flex',\r\n    width: '100%'\r\n  }\r\n});\r\n\r\nexport interface ISudokuRowProps extends WithStyles<typeof styles> {\r\n  row: Row;\r\n  rowSize: number;\r\n  toggleCell: typeof toggleCell;\r\n  mode: MODE;\r\n}\r\n\r\nclass SudokuRowComponent extends Component<ISudokuRowProps> {\r\n\r\n  public render(): JSX.Element {\r\n    const { classes } = this.props\r\n    return (\r\n      <div className={classes.sudokuRow}>\r\n        {this.renderRow()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderRow(): JSX.Element[] | null {\r\n    return this.props.row\r\n      .getCells()\r\n      .map((c, i) => <SudokuCell mode={this.props.mode} toggleCell={this.props.toggleCell} cell={c} size={this.getCellSize()} key={i} />);\r\n  }\r\n\r\n  private getCellSize(): number {\r\n    return this.props.rowSize / 9;\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(SudokuRowComponent);","import React, { Component, CSSProperties } from \"react\";\r\nimport Sudoku from \"../models/Sudoku\";\r\nimport SudokuRow from \"./SudokuRow\";\r\nimport { createNewGame, toggleCell, undo, redo, removeDigit, resetSudoku } from \"../store/actions\";\r\nimport { DIFFICULTY } from \"../models/Difficulty\";\r\nimport { withStyles, WithStyles, createStyles, Theme, Card, CardActions, CardContent, IconButton, CardHeader, Menu, MenuItem } from \"@material-ui/core\";\r\nimport UndoIcon from '@material-ui/icons/Undo';\r\nimport RedoIcon from '@material-ui/icons/Redo';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { MODE } from \"../store/types\";\r\nimport MenuIcon from '@material-ui/icons/MoreVert';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  cardContent: {\r\n    padding: 0\r\n  },\r\n  container: {\r\n    position: 'relative',\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    '@media (orientation: portrait)': {\r\n      height: `calc(100vw - ${2.5 * theme.spacing.unit}px)`,\r\n      width: `calc(100vw - ${2.5 * theme.spacing.unit}px)`,\r\n    },\r\n    '@media (orientation: landscape)': {\r\n      height: 'calc(100vh - 2*64px - 100px)',\r\n      width: 'calc(100vh - 2*64px - 100px)',\r\n    },\r\n  },\r\n  sudoku: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    padding: theme.spacing.unit\r\n  },\r\n  toolbar: {\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    padding: `0 ${theme.spacing.unit}px`\r\n  },\r\n  toolbarButton: {\r\n    padding: theme.spacing.unit\r\n  },\r\n  header: {\r\n    padding: theme.spacing.unit,\r\n    paddingBottom: 0\r\n  },\r\n  headerButton: {\r\n    padding: theme.spacing.unit\r\n\r\n  }\r\n});\r\n\r\nexport interface ISudokuProps extends WithStyles<typeof styles> {\r\n  sudoku: Sudoku;\r\n  difficulty: DIFFICULTY;\r\n  createNewGame: typeof createNewGame;\r\n  toggleCell: typeof toggleCell;\r\n  mode: MODE;\r\n  undo: typeof undo;\r\n  redo: typeof redo;\r\n  removeDigit: typeof removeDigit;\r\n  past: Sudoku[];\r\n  future: Sudoku[];\r\n}\r\n\r\nexport interface ISudokuState {\r\n  rowSize: number;\r\n  menuAnchor: any\r\n}\r\n\r\nclass SudokuComponent extends Component<ISudokuProps, ISudokuState> {\r\n  private containerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  constructor(props: ISudokuProps) {\r\n    super(props);\r\n    this.containerRef = React.createRef();\r\n    this.state = {\r\n      rowSize: 0,\r\n      menuAnchor: null\r\n    };\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { classes } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <Card>\r\n          <CardContent className={classes.cardContent}>\r\n            <div className={classes.container} ref={this.containerRef}>\r\n              <div className={classes.sudoku} >\r\n                {this.renderRows()}\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n          <CardActions className={classes.toolbar}>\r\n            <IconButton className={classes.toolbarButton} color=\"inherit\" disabled={!this.props.past.length} onClick={() => this.props.undo()}>\r\n              <UndoIcon />\r\n            </IconButton>\r\n            <IconButton className={classes.toolbarButton} onClick={() => this.props.removeDigit()}>\r\n              <ClearIcon />\r\n            </IconButton>\r\n            <IconButton className={classes.toolbarButton} color=\"inherit\" disabled={!this.props.future.length} onClick={() => this.props.redo()}>\r\n              <RedoIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n        </Card>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n  public componentDidMount(): void {\r\n    this.setCellSize();\r\n  }\r\n\r\n  private setCellSize = () => {\r\n    const rowDOM = this.containerRef.current;\r\n    if (rowDOM) {\r\n      const boundingRectangle = rowDOM.getBoundingClientRect();\r\n      const height = boundingRectangle.height - 100;\r\n      const width = boundingRectangle.width\r\n      const smallestDimmesion = height < width ? height : width;\r\n      const fittedDimmension = 9 * Math.floor(smallestDimmesion / 9);\r\n      this.setState({\r\n        rowSize: fittedDimmension\r\n      });\r\n    } else {\r\n      requestAnimationFrame(() => {\r\n        this.setCellSize();\r\n      });\r\n    }\r\n  }\r\n\r\n  private renderRows(): JSX.Element[] | null {\r\n    if (!this.state.rowSize) {\r\n      return null;\r\n    }\r\n    return this.props.sudoku.getRows().map((r, i) => (\r\n      <SudokuRow mode={this.props.mode} row={r} key={i} rowSize={this.state.rowSize} toggleCell={this.props.toggleCell} />\r\n    ));\r\n  }\r\n\r\n  private formatMillisecons(milliSeconds: number): string {\r\n    const pad = (num: number) => Math.round(num).toString().padStart(2, '0');\r\n\r\n    const seconds = pad((milliSeconds / 1000) % 60);\r\n    const minutes = pad((milliSeconds / (1000 * 60)) % 60);\r\n    const hours = pad((milliSeconds / (1000 * 60 * 60)) % 24);\r\n\r\n    return `${hours}:${minutes}:${seconds}`;\r\n  }\r\n}\r\n\r\n\r\nexport default withStyles(styles)(SudokuComponent);","import React from 'react';\r\n\r\nimport { setDigit, removeDigit, setMode, redo, undo } from '../store/actions';\r\nimport Sudoku from '../models/Sudoku';\r\nimport { MODE } from '../store/types';\r\nimport { Paper, createStyles, Theme, WithStyles, withStyles, LinearProgress } from '@material-ui/core';\r\nimport Chip, { ChipProps } from '@material-ui/core/Chip'\r\nimport { DIFFICULTY } from '../models/Difficulty';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  container: {\r\n    paddingTop: theme.spacing.unit,\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n  },\r\n  progress: {\r\n    borderBottomRightRadius: theme.spacing.unit / 2,\r\n    borderBottomLeftRadius: theme.spacing.unit / 2\r\n  },\r\n  errorBar: {\r\n    backgroundColor: theme.palette.error.light\r\n  },\r\n  successBar: {\r\n    backgroundColor: '#66bb6a'\r\n  },\r\n  chip: {\r\n    margin: '4px 2px 4px 2px'\r\n  }\r\n});\r\n\r\ninterface INumbersProps extends WithStyles<typeof styles> {\r\n  setDigit: typeof setDigit;\r\n  removeDigit: typeof removeDigit;\r\n  mode: MODE;\r\n  setMode: typeof setMode;\r\n  sudoku: Sudoku;\r\n  difficulty: DIFFICULTY;\r\n}\r\n\r\ninterface INumbersState {\r\n  longPressTimeout: number | null;\r\n  clickHandledByLongPress: boolean;\r\n}\r\n\r\nclass INumbers extends React.Component<INumbersProps, INumbersState> {\r\n  constructor(props: INumbersProps) {\r\n    super(props);\r\n    this.state = {\r\n      longPressTimeout: null,\r\n      clickHandledByLongPress: false\r\n    }\r\n  }\r\n\r\n  private mouseDownHandler(value: number) {\r\n    const longPressTimeout = window.setTimeout(() => {\r\n      this.props.setDigit(value, true)\r\n      this.setState({\r\n        clickHandledByLongPress: true\r\n      })\r\n    }, 1000)\r\n    this.setState({\r\n      longPressTimeout\r\n    })\r\n  }\r\n\r\n  private mouseUpHandler() {\r\n    if (this.state.longPressTimeout) {\r\n      window.clearTimeout(this.state.longPressTimeout)\r\n    }\r\n  }\r\n\r\n  private getProgress() {\r\n    const cellsLeft = this.props.difficulty - this.props.sudoku.countEmptyCells();\r\n    const completionRatio = cellsLeft / this.props.difficulty;\r\n    return completionRatio * 100;\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { classes } = this.props;\r\n    const isNoteMode = this.props.mode === MODE.Note;\r\n    const sudoku = this.props.sudoku;\r\n    const isSolved = sudoku.isSolved();\r\n    const showRedProgressBar = sudoku.countEmptyCells() === 0 && !isSolved;\r\n    return (\r\n      <div className={classes.container}>\r\n        <Paper>\r\n          {[...Array(10).keys()].slice(1).map(x => {\r\n            let color: ChipProps['color'] = 'primary';\r\n            if (this.props.sudoku.isDigitSolved(x)) {\r\n              color = 'default';\r\n            } else if (isNoteMode) {\r\n              color = 'secondary';\r\n            }\r\n            return (\r\n              <Chip\r\n                onMouseDown={() => this.mouseDownHandler(x)}\r\n                onTouchStart={() => this.mouseDownHandler(x)}\r\n                onMouseUp={() => this.mouseUpHandler()}\r\n                onTouchEnd={() => this.mouseUpHandler()}\r\n                onClick={() => {\r\n                  if (!this.state.clickHandledByLongPress) {\r\n                    alert(2)\r\n                    this.props.setDigit(x);\r\n                  }\r\n                  this.setState({\r\n                    clickHandledByLongPress: false\r\n                  })\r\n                }}\r\n                color={color}\r\n                className={classes.chip}\r\n                label={x} key={x} />\r\n            );\r\n          })}\r\n          <LinearProgress className={classes.progress}\r\n            classes={{\r\n              bar: showRedProgressBar ? classes.errorBar : \"\"\r\n            }}\r\n            variant=\"determinate\"\r\n            value={this.getProgress()}\r\n          />\r\n        </Paper>\r\n      </div >\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default withStyles(styles)(INumbers);","\r\nlet resolvePromise = () => { };\r\nconst updateExistsPromise = new Promise((resolve, reject) => {\r\n  resolvePromise = resolve;\r\n})\r\n\r\nexport const registerUpdate = resolvePromise;\r\nexport default updateExistsPromise;","import React, { Component } from 'react';\r\nimport { createStyles, withStyles, WithStyles, Theme } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { DIFFICULTY } from '../models/Difficulty';\r\nimport { changeDifficulty, validateSolution, createNewGame, toggleNightMode, resetSudoku, fillCandidates, clearCandidates, setMode } from '../store/actions';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport CollapseIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandIcon from '@material-ui/icons/ExpandMore';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport NewIcon from '@material-ui/icons/Casino'\r\nimport ResetIcon from '@material-ui/icons/Replay'\r\nimport HelpIcon from '@material-ui/icons/Help'\r\nimport DifficultyIcon from '@material-ui/icons/FitnessCenter'\r\nimport UpdateIcon from '@material-ui/icons/SyncProblem'\r\nimport { Fab } from '@material-ui/core';\r\nimport PenIcon from \"@material-ui/icons/Edit\";\r\nimport PenIconOutline from \"@material-ui/icons/EditOutlined\";\r\nimport { MODE } from '../store/types';\r\nimport ServiceWorkerUpdated from \"../utils/ServiceWorkerUpdated\";\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  modeFab: {\r\n    position: 'fixed',\r\n    zIndex: 1,\r\n    bottom: 4 * theme.spacing.unit,\r\n    right: 4 * theme.spacing.unit\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    paddingTop: theme.spacing.unit / 2,\r\n    paddingBottom: theme.spacing.unit / 2,\r\n    paddingLeft: theme.spacing.unit,\r\n    paddingRight: theme.spacing.unit,\r\n    color: theme.palette.type === \"dark\" ? theme.palette.primary.contrastText : theme.palette.secondary.main,\r\n  },\r\n  drawerList: {\r\n    paddingTop: 0\r\n  },\r\n  drawerPaper: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      minWidth: '70%'\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      minWidth: '40%'\r\n    },\r\n    [theme.breakpoints.up('lg')]: {\r\n      minWidth: '30%'\r\n    }\r\n  },\r\n  listHeader: {\r\n    backgroundColor: theme.palette.background.default,\r\n    textTransform: \"uppercase\"\r\n  },\r\n  notesToggle: {\r\n    color: theme.palette.common.white\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing.unit * 9\r\n  },\r\n  subMenuButton: {\r\n    color: theme.palette.type === \"dark\" ? theme.palette.primary.contrastText : theme.palette.grey[600]\r\n  }\r\n});\r\n\r\nexport interface ITopBarProps extends WithStyles<typeof styles> {\r\n  difficulty: DIFFICULTY;\r\n  changeDifficulty: typeof changeDifficulty;\r\n  validateSolution: typeof validateSolution;\r\n  createNewGame: typeof createNewGame;\r\n  toggleNightMode: typeof toggleNightMode;\r\n  nightMode: boolean;\r\n  resetSudoku: typeof resetSudoku;\r\n  fillCandidates: typeof fillCandidates;\r\n  clearCandidates: typeof clearCandidates;\r\n  mode: MODE;\r\n  setMode: typeof setMode;\r\n}\r\nexport interface ITopBarState {\r\n  drawerOpen: boolean;\r\n  difficultyOpen: boolean;\r\n  helpOpen: boolean;\r\n  hasUpdates: boolean;\r\n}\r\n\r\nconst DIFFICUTIES = [{\r\n  difficulty: DIFFICULTY.VeryEasy,\r\n  label: \"Very Easy\"\r\n}, {\r\n  difficulty: DIFFICULTY.Easy,\r\n  label: \"Easy\"\r\n}, {\r\n  difficulty: DIFFICULTY.Normal,\r\n  label: \"Medium\"\r\n}, {\r\n  difficulty: DIFFICULTY.Hard,\r\n  label: \"Hard\"\r\n}, {\r\n  difficulty: DIFFICULTY.VeryHard,\r\n  label: \"Very Hard\"\r\n}]\r\n\r\nclass TopBar extends Component<ITopBarProps, ITopBarState> {\r\n  constructor(props: ITopBarProps) {\r\n    super(props);\r\n    this.state = {\r\n      drawerOpen: false,\r\n      difficultyOpen: false,\r\n      helpOpen: false,\r\n      hasUpdates: false\r\n    }\r\n\r\n    ServiceWorkerUpdated.then(() => {\r\n      this.setState({\r\n        hasUpdates: true\r\n      })\r\n    })\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const isNoteMode = this.props.mode === MODE.Note\r\n    const toggleMode = () => {\r\n      if (isNoteMode) {\r\n        this.props.setMode(MODE.Input);\r\n      } else {\r\n        this.props.setMode(MODE.Note);\r\n      }\r\n    }\r\n\r\n    const { classes } = this.props;\r\n    return (\r\n      <React.Fragment>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" onClick={() => this.openDrawer()}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n              {this.getBarText()}\r\n            </Typography>\r\n            <FormControlLabel\r\n              classes={{ label: classes.notesToggle }}\r\n              label=\"Night mode\"\r\n              labelPlacement=\"start\"\r\n              onClick={() => this.props.toggleNightMode()}\r\n              control={<Switch checked={this.props.nightMode} />}\r\n            />\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Drawer variant=\"temporary\" classes={{ paper: classes.drawerPaper }} open={this.state.drawerOpen} onClose={() => this.closeDrawer()}>\r\n          <div className={classes.drawerHeader}>\r\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n              Options\r\n              </Typography>\r\n            <IconButton onClick={() => this.closeDrawer()}>\r\n              <ChevronLeftIcon />\r\n            </IconButton>\r\n          </div>\r\n          <List className={classes.drawerList}>\r\n            <ListSubheader className={classes.listHeader}>Puzzle</ListSubheader>\r\n            <ListItem button onClick={() => this.createNewGame()}>\r\n              <ListItemIcon>\r\n                <NewIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"New puzzle\" />\r\n            </ListItem>\r\n            <ListItem button onClick={() => this.reset()} >\r\n              <ListItemIcon>\r\n                <ResetIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Reset puzzle\" />\r\n            </ListItem>\r\n            <ListItem button onClick={() => this.toggleHelp()}>\r\n              <ListItemIcon>\r\n                <HelpIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Help\" />\r\n              {this.state.helpOpen ?\r\n                <CollapseIcon className={classes.subMenuButton} /> :\r\n                <ExpandIcon className={classes.subMenuButton} />\r\n              }\r\n            </ListItem>\r\n            <Collapse in={this.state.helpOpen} timeout=\"auto\" unmountOnExit>\r\n              <List disablePadding>\r\n                <ListItem className={this.props.classes.nested} button onClick={() => this.validate()} >\r\n                  <ListItemText primary=\"Validate\" />\r\n                </ListItem>\r\n                <ListItem className={this.props.classes.nested} button onClick={() => this.fillCandidates()} >\r\n                  <ListItemText primary=\"Show candidates\" />\r\n                </ListItem>\r\n                <ListItem className={this.props.classes.nested} button onClick={() => this.clearCandidates()} >\r\n                  <ListItemText primary=\"Clear candidates\" />\r\n                </ListItem>\r\n              </List>\r\n            </Collapse>\r\n            <ListItem button onClick={() => this.toggleDifficulty()}>\r\n              <ListItemIcon>\r\n                <DifficultyIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Difficulty\" />\r\n              {this.state.difficultyOpen ?\r\n                <CollapseIcon className={classes.subMenuButton} /> :\r\n                <ExpandIcon className={classes.subMenuButton} />\r\n              }\r\n            </ListItem>\r\n            <Collapse in={this.state.difficultyOpen} timeout=\"auto\" unmountOnExit>\r\n              <List disablePadding>\r\n                {this.renderDifficulties()}\r\n              </List>\r\n            </Collapse>\r\n            <ListSubheader className={classes.listHeader}>Settings</ListSubheader>\r\n            <ListItem disabled={!this.state.hasUpdates} button onClick={() => this.forceRefresh()}>\r\n              <ListItemIcon>\r\n                <UpdateIcon />\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Update App\" />\r\n            </ListItem>\r\n          </List>\r\n        </Drawer>\r\n\r\n        <Fab color={isNoteMode ? 'secondary' : 'default'} className={classes.modeFab} onClick={() => toggleMode()}>\r\n          {isNoteMode ? <PenIconOutline /> : <PenIcon />}\r\n        </Fab>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  private openDrawer(): void {\r\n    this.setState({\r\n      drawerOpen: true\r\n    });\r\n  }\r\n\r\n  private closeDrawer(): void {\r\n    this.setState({\r\n      drawerOpen: false,\r\n    });\r\n  }\r\n\r\n  private renderDifficulties(): JSX.Element[] {\r\n    return DIFFICUTIES.map(option => (\r\n      <ListItem\r\n        button\r\n        className={this.props.classes.nested}\r\n        key={option.difficulty}\r\n        selected={this.props.difficulty === option.difficulty}\r\n        onClick={() => this.setDifficulty(option.difficulty)}>\r\n        <ListItemText primary={option.label} />\r\n      </ListItem>\r\n    ));\r\n  }\r\n\r\n  private setDifficulty(difficulty: DIFFICULTY): void {\r\n    this.closeDrawer();\r\n    this.props.changeDifficulty(difficulty);\r\n  }\r\n\r\n  private validate(): void {\r\n    this.closeDrawer();\r\n    this.props.validateSolution();\r\n  }\r\n\r\n  private getBarText(): string {\r\n    const difficulty = DIFFICUTIES.find(option => option.difficulty === this.props.difficulty);\r\n    if (difficulty) {\r\n      return `${difficulty.label}`;\r\n    }\r\n    return \"\";\r\n  }\r\n  private createNewGame(): void {\r\n    this.closeDrawer();\r\n    this.props.createNewGame();\r\n  }\r\n\r\n  private reset(): void {\r\n    this.closeDrawer();\r\n    this.props.resetSudoku();\r\n  }\r\n\r\n  private fillCandidates(): void {\r\n    this.closeDrawer();\r\n    this.props.fillCandidates();\r\n  }\r\n\r\n  private clearCandidates(): void {\r\n    this.closeDrawer();\r\n    this.props.clearCandidates();\r\n  }\r\n\r\n  private async forceRefresh() {\r\n    let serviceWorker = await navigator.serviceWorker.getRegistration()\r\n    if (serviceWorker) {\r\n      await serviceWorker.unregister();\r\n    }\r\n    localStorage.clear()\r\n    window.location.reload(true);\r\n  }\r\n\r\n  private toggleDifficulty(): void {\r\n    this.setState({ difficultyOpen: !this.state.difficultyOpen })\r\n  }\r\n\r\n  private toggleHelp(): void {\r\n    this.setState({ helpOpen: !this.state.helpOpen })\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(TopBar);","import React from 'react';\r\nimport { withStyles, Dialog, DialogTitle, DialogContent, RadioGroup, FormControlLabel, Radio, DialogActions, Button, createStyles, Theme, WithTheme, WithStyles, Typography } from \"@material-ui/core\";\r\nimport { createNewGame } from '../store/actions';\r\nimport Sudoku from '../models/Sudoku';\r\nimport { DIFFICULTY } from '../models/Difficulty';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n\r\n})\r\n\r\nexport interface ICompletedDialogProps extends WithStyles<typeof styles> {\r\n  createNewGame: typeof createNewGame;\r\n  sudoku: Sudoku;\r\n  difficulty: DIFFICULTY;\r\n}\r\n\r\nconst CompletedDialog: React.FunctionComponent<ICompletedDialogProps> = (props: ICompletedDialogProps) => {\r\n  const formatMillisecons = (milliSeconds: number) => {\r\n    const pad = (num: number) => Math.round(num).toString().padStart(2, '0');\r\n\r\n    const seconds = pad((milliSeconds / 1000) % 60);\r\n    const minutes = pad((milliSeconds / (1000 * 60)) % 60);\r\n    const hours = pad((milliSeconds / (1000 * 60 * 60)) % 24);\r\n\r\n    return `${hours}:${minutes}:${seconds}`;\r\n  }\r\n\r\n  const difficultyText = () => {\r\n    switch (props.difficulty) {\r\n      case DIFFICULTY.VeryEasy:\r\n        return 'a very easy';\r\n      case DIFFICULTY.Easy:\r\n        return 'an easy';\r\n      case DIFFICULTY.Normal:\r\n        return 'a medium';\r\n      case DIFFICULTY.Hard:\r\n        return 'a hard';\r\n      case DIFFICULTY.VeryHard:\r\n        return 'a very hard';\r\n      default:\r\n        return 'an unknown';\r\n    }\r\n  }\r\n\r\n  const ellapsedTime = formatMillisecons(Date.now() - props.sudoku.getCreationTimestamp())\r\n\r\n  return (\r\n    <Dialog\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n      maxWidth=\"xl\"\r\n      open={props.sudoku.isSolved()}\r\n      fullWidth={true}\r\n    >\r\n      <DialogTitle id=\"confirmation-dialog-title\">Done!</DialogTitle>\r\n      <DialogContent>\r\n        <Typography variant=\"body1\" gutterBottom>\r\n          You completed {difficultyText()} puzzle.\r\n        </Typography>\r\n        <Typography variant=\"body1\">\r\n          Elapsed time: {ellapsedTime}\r\n        </Typography>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => { props.createNewGame() }}>\r\n          New Game\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(CompletedDialog);","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"../layout/App.scss\";\r\nimport SudokuComponent from \"./Sudoku\";\r\nimport Numbers from \"./Numbers\";\r\nimport { AppState } from \"../store\";\r\nimport { changeDifficulty, createNewGame, validateSolution, toggleCell, setDigit, removeDigit, navigateCells, setMode, redo, undo, toggleNightMode, resetSudoku, fillCandidates, clearCandidates } from \"../store/actions\";\r\nimport { DIFFICULTY } from \"../models/Difficulty\";\r\nimport Sudoku from \"../models/Sudoku\";\r\nimport { DIRECTION, MODE } from \"../store/types\";\r\nimport TopBar from \"./TopBar\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport CompletedDialog from \"./CompletedDialog\";\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport theme from \"../theme\";\r\n\r\ninterface IAppProps {\r\n  changeDifficulty: typeof changeDifficulty;\r\n  createNewGame: typeof createNewGame;\r\n  validateSolution: typeof validateSolution;\r\n  toggleCell: typeof toggleCell;\r\n  setDigit: typeof setDigit;\r\n  removeDigit: typeof removeDigit;\r\n  navigateCells: typeof navigateCells;\r\n  setMode: typeof setMode;\r\n  undo: typeof undo,\r\n  redo: typeof redo,\r\n  mode: MODE;\r\n  sudoku: Sudoku;\r\n  past: Sudoku[];\r\n  future: Sudoku[];\r\n  difficulty: DIFFICULTY;\r\n  nightMode: boolean;\r\n  toggleNightMode: typeof toggleNightMode;\r\n  resetSudoku: typeof resetSudoku;\r\n  fillCandidates: typeof fillCandidates;\r\n  clearCandidates: typeof clearCandidates;\r\n}\r\n\r\nclass App extends Component<IAppProps> {\r\n  constructor(props: IAppProps) {\r\n    super(props);\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const t = theme(this.props.nightMode)\r\n    return (\r\n      <div className=\"App\">\r\n        <MuiThemeProvider theme={t}>\r\n          <CssBaseline />\r\n          <TopBar {...this.props} />\r\n          <div className=\"App-content\">\r\n            <SudokuComponent {...this.props} />\r\n            <Numbers {...this.props} />\r\n          </div>\r\n          <CompletedDialog {...this.props}></CompletedDialog>\r\n        </MuiThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n  public componentDidMount(): void {\r\n    document.addEventListener(\"keydown\", this.handleKeyboard);\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    document.removeEventListener(\"keydown\", this.handleKeyboard);\r\n  }\r\n\r\n  private handleKeyboard = (e: KeyboardEvent) => {\r\n    const key = e.which;\r\n    if (key >= 49 && key <= 57) { // [1...9]\r\n      this.props.setDigit(key - 48);\r\n    } else if (key === 8 || key === 2) { // backspace || delete\r\n      this.props.removeDigit()\r\n    } else if (key === 37) { //left \r\n      this.props.navigateCells(DIRECTION.Left);\r\n    } else if (key === 38) { //up\r\n      this.props.navigateCells(DIRECTION.Up);\r\n    } else if (key === 39) { // right\r\n      this.props.navigateCells(DIRECTION.Right);\r\n    } else if (key === 40) { // down\r\n      this.props.navigateCells(DIRECTION.Down);\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n  sudoku: state.game.sudoku.current,\r\n  past: state.game.sudoku.past,\r\n  future: state.game.sudoku.future,\r\n  difficulty: state.game.difficulty,\r\n  mode: state.game.mode,\r\n  nightMode: state.game.nightMode\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  {\r\n    changeDifficulty,\r\n    createNewGame,\r\n    validateSolution,\r\n    toggleCell,\r\n    setDigit,\r\n    removeDigit,\r\n    navigateCells,\r\n    setMode,\r\n    undo,\r\n    redo,\r\n    toggleNightMode,\r\n    resetSudoku,\r\n    fillCandidates,\r\n    clearCandidates\r\n  }\r\n)(App);\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\n\r\nexport default (nightMode: boolean) => {\r\n  return createMuiTheme({\r\n    typography: {\r\n      useNextVariants: true,\r\n    },\r\n    palette: {\r\n      type: nightMode ? 'dark' : 'light',\r\n      primary: {\r\n        main: '#424242'\r\n      },\r\n      secondary: {\r\n        main: '#616161'\r\n      }\r\n    },\r\n  });\r\n};","import {\r\n  OptionActions,\r\n  CHANGE_DIFFICULTY,\r\n  NEW_GAME,\r\n  VALIDATE_SOLUTION,\r\n  TOGGLE_CELL,\r\n  SET_DIGIT,\r\n  REMOVE_DIGIT,\r\n  NAVIGATE_CELLS,\r\n  DIRECTION,\r\n  TOGGLE_NOTE_MODE,\r\n  REDO,\r\n  UNDO,\r\n  MODE,\r\n  TOGGLE_NIGHT_MODE,\r\n  RESET_SUDOKU,\r\n  FILL_CANDIDATES,\r\n  CLEAR_CANDIDATES\r\n} from \"./types\";\r\nimport { DIFFICULTY } from \"../models/Difficulty\";\r\n\r\nexport function changeDifficulty(difficulty: DIFFICULTY): OptionActions {\r\n  return {\r\n    type: CHANGE_DIFFICULTY,\r\n    payload: difficulty\r\n  };\r\n}\r\n\r\nexport function createNewGame(): OptionActions {\r\n  return {\r\n    type: NEW_GAME\r\n  };\r\n}\r\n\r\nexport function validateSolution(): OptionActions {\r\n  return {\r\n    type: VALIDATE_SOLUTION\r\n  };\r\n}\r\n\r\nexport function toggleCell(row: number, column: number): OptionActions {\r\n  return {\r\n    type: TOGGLE_CELL,\r\n    payload: {\r\n      row,\r\n      column\r\n    }\r\n  };\r\n}\r\n\r\nexport function setDigit(digit: number, force: boolean = false): OptionActions {\r\n  return {\r\n    type: SET_DIGIT,\r\n    payload: {\r\n      digit,\r\n      force\r\n    }\r\n  };\r\n}\r\n\r\nexport function removeDigit(): OptionActions {\r\n  return {\r\n    type: REMOVE_DIGIT\r\n  };\r\n}\r\n\r\nexport function navigateCells(direction: DIRECTION): OptionActions {\r\n  return {\r\n    type: NAVIGATE_CELLS,\r\n    payload: {\r\n      direction\r\n    }\r\n  };\r\n}\r\n\r\nexport function setMode(mode: MODE): OptionActions {\r\n  return {\r\n    type: TOGGLE_NOTE_MODE,\r\n    payload: {\r\n      mode\r\n    }\r\n  }\r\n}\r\n\r\nexport function undo(): OptionActions {\r\n  return {\r\n    type: UNDO,\r\n  };\r\n}\r\n\r\nexport function redo(): OptionActions {\r\n  return {\r\n    type: REDO\r\n  };\r\n}\r\n\r\nexport function toggleNightMode(): OptionActions {\r\n  return {\r\n    type: TOGGLE_NIGHT_MODE\r\n  };\r\n}\r\n\r\nexport function resetSudoku(): OptionActions {\r\n  return {\r\n    type: RESET_SUDOKU\r\n  };\r\n}\r\n\r\nexport function fillCandidates(): OptionActions {\r\n  return {\r\n    type: FILL_CANDIDATES\r\n  };\r\n}\r\n\r\n\r\nexport function clearCandidates(): OptionActions {\r\n  return {\r\n    type: CLEAR_CANDIDATES\r\n  };\r\n}\r\n","import \"./layout/index.scss\";\r\n\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nimport configureStore from \"./store\";\r\nimport App from \"./presentation/App\";\r\nimport pregenerate from \"./utils/pregenerate\";\r\nimport { registerUpdate } from \"./utils/ServiceWorkerUpdated\";\r\n\r\nconst store = configureStore();\r\n\r\nconst Root = () => (\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>\r\n);\r\n\r\nReactDOM.render(<Root />, document.getElementById(\"root\"));\r\nserviceWorker.register();\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  (window as any).pregenerate = pregenerate;\r\n}\r\n\r\nserviceWorker.register({\r\n  onUpdate: () => {\r\n    registerUpdate()\r\n  }\r\n})"],"sourceRoot":""}