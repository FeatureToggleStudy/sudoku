(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(36)},21:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);n(21);var a=n(0),i=n.n(a),r=n(12),o=n.n(r),u=n(13),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var s,v=n(9),d=n(4),h=n(3);!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(s||(s={}));var f,p="CHANGE_DIFFICULTY",m="NEW_GAME",y="VALIDATE_SOLUTION",k="TOGGLE_CELLs",g="SET_DIGIT",w="REMOVE_DIGIT",b="NAVIGATE_CELLS",C="TOGGLE_NOTE_MODE",E="UNDO",O="REDO",j=n(10),S=n(1),N=n(2),D=[!1,!1,!1,!1,!1,!1,!1,!1,!1],A=function(){function e(t){Object(S.a)(this,e),this.value=void 0,this.valid=void 0,this.solution=void 0,this.row=void 0,this.column=void 0,this.given=void 0,this.active=void 0,this.notes=void 0,this.value=t?t.value:null,this.solution=t?t.solution:-1,this.row=t?t.row:-1,this.column=t?t.column:-1,this.given=!!t&&t.given,this.active=!!t&&t.active,this.valid=!t||t.valid,this.notes=t?t.notes:[].concat(D)}return Object(N.a)(e,[{key:"getSolution",value:function(){return this.solution}},{key:"getValue",value:function(){return this.value}},{key:"getRow",value:function(){return this.row}},{key:"getColumn",value:function(){return this.column}},{key:"isActive",value:function(){return this.active}},{key:"getBlock",value:function(){return this.row<=3?this.calculateBlock(0):this.row>=4&&this.row<=6?this.calculateBlock(1):this.calculateBlock(2)}},{key:"calculateBlock",value:function(e){return this.column<=3?e+1:this.column>=4&&this.column<=6?e+2:e+3}},{key:"isGiven",value:function(){return this.given}},{key:"validate",value:function(){var t=new e(this);return t.valid=null===this.value||this.value===this.solution,t}},{key:"isValid",value:function(){return this.valid}},{key:"setActive",value:function(t){var n=new e(this);return n.active=t,n}},{key:"setDigit",value:function(t,n){if(!this.active||this.given)return this;var a=new e(this);return n?a.notes=this.notes.map(function(e,n){return n===t-1?!e:e}):a.value=this.value===t?null:t,a.valid=!0,a}},{key:"removeDigit",value:function(){if(!this.active)return this;var t=new e(this);return t.notes=[].concat(D),t.value=null,t.valid=!0,t}},{key:"isSolved",value:function(){return this.value===this.solution}},{key:"getNotes",value:function(){return this.notes}}],[{key:"create",value:function(t,n,a,i){var r=new e;return r.solution=t,r.row=n,r.column=a,r.given=i,r.value=i?t:null,r.valid=!0,r}}]),e}(),M=function(){function e(t){Object(S.a)(this,e),this.cells=void 0,this.index=void 0,this.active=void 0,this.index=t?t.index:-1,this.active=!!t&&t.active,this.cells=t?t.cells:[]}return Object(N.a)(e,[{key:"getCells",value:function(){return this.cells}},{key:"validate",value:function(){var t=new e(this);return t.cells=this.cells.map(function(e){return e.validate()}),t}},{key:"getIndex",value:function(){return this.index}},{key:"toggleCell",value:function(t,n){if(this.index!==t&&!this.active)return this;var a=new e(this);return this.active?this.index===t?a.cells=this.cells.map(function(e){return e.setActive(!e.isActive()&&e.getColumn()===n)}):(a.active=!1,a.cells=this.cells.map(function(e){return e.isActive()?e.setActive(!1):e})):this.index===t&&(a.active=!0,a.cells=this.cells.map(function(e){return e.getColumn()===n?e.setActive(!0):e})),a}},{key:"isActive",value:function(){return this.active}},{key:"setDigit",value:function(t,n){if(!this.active)return this;var a=new e(this);return a.cells=this.cells.map(function(e){return e.setDigit(t,n)}),a}},{key:"removeDigit",value:function(){if(!this.active)return this;var t=new e(this);return t.cells=this.cells.map(function(e){return e.removeDigit()}),t}}],[{key:"create",value:function(t,n){var a=new e;return a.cells=Object(d.a)(t.map(function(e,t){var a=Object(j.a)(e,2),i=a[0],r=a[1];return A.create(i,n,t+1,r)})),a.index=n,a}}]),e}();!function(e){e[e.VeryEasy=30]="VeryEasy",e[e.Easy=36]="Easy",e[e.Normal=42]="Normal",e[e.Hard=48]="Hard",e[e.VeryHard=54]="VeryHard",e[e.Insane=60]="Insane"}(f||(f={}));var R=[[3,6,1,7,2,5,9,4,8],[5,8,7,9,6,4,2,1,3],[4,9,2,8,3,1,6,5,7],[6,3,8,2,5,9,4,7,1],[1,7,4,6,8,3,5,9,2],[2,5,9,1,4,7,8,3,6],[7,4,6,3,9,2,1,8,5],[9,2,3,5,1,8,7,6,4],[8,1,5,4,7,6,3,2,9]],z=function(){function e(t){Object(S.a)(this,e),this.difficulty=void 0,this.data=void 0,this.rows=void 0,this.activeCell=void 0,this.createdAt=void 0,this.difficulty=t?t.difficulty:f.Easy,this.data=t?t.data:[],this.rows=t?t.rows:[],this.activeCell=t?t.activeCell:{row:-1,column:-1},this.createdAt=t?t.createdAt:0}return Object(N.a)(e,[{key:"getRows",value:function(){return this.rows}},{key:"generateSudoku",value:function(){for(var e=0;e<1e3;e++)this.moveRowOrColumn();this.removeValues(),this.rows=this.data.map(function(e,t){return M.create(e,t+1)})}},{key:"removeValues",value:function(){for(var e=this.difficulty;e;){var t=Math.floor(9*Math.random()),n=Math.floor(9*Math.random()),a=Object(j.a)(this.data[t][n],2),i=a[0];a[1]&&(this.data[t][n]=[i,!1],--e)}}},{key:"moveRowOrColumn",value:function(){var e=this.getFromAndTo(),t=Object(j.a)(e,2),n=t[0],a=t[1];Math.round(Math.random())?this.moveColumn(n,a):this.moveRow(n,a)}},{key:"getFromAndTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;e=-1===e?Math.floor(3*Math.random()):e;var t=Math.floor(3*Math.random());if(t===e)return this.getFromAndTo(e);var n=Math.floor(3*Math.random());return[3*n+e,3*n+t]}},{key:"moveRow",value:function(e,t){var n=this.data[t];this.data[t]=this.data[e],this.data[e]=n}},{key:"moveColumn",value:function(e,t){this.data.forEach(function(n){var a=n[t];n[t]=n[e],n[e]=a})}},{key:"validate",value:function(){var t=new e(this);return t.rows=this.rows.map(function(e){return e.validate()}),t}},{key:"activateCell",value:function(t,n){var a=new e(this);return a.activeCell={row:t,column:n},a.rows=this.rows.map(function(e){return e.toggleCell(t,n)}),a}},{key:"setDigit",value:function(t,n){var a=new e(this);return a.rows=this.rows.map(function(e){return e.setDigit(t,n)}),a}},{key:"removeDigit",value:function(){var t=new e(this);return t.rows=this.rows.map(function(e){return e.removeDigit()}),t}},{key:"getSolvedNumbers",value:function(){for(var e=this.rows.reduce(function(e,t){return e.concat(t.getCells().map(function(e){return e.getValue()||0}),[])},[]),t=[],n=function(n){9===e.filter(function(e){return e===n}).length&&t.push(n)},a=1;a<=9;a++)n(a);return t}},{key:"navigate",value:function(e){var t=function(e){return 9===e?1:e+1},n=function(e){return 1===e?9:e-1};switch(e){case s.Up:this.activeCell.row=n(this.activeCell.row);break;case s.Down:this.activeCell.row=t(this.activeCell.row);break;case s.Right:this.activeCell.column=t(this.activeCell.column);break;case s.Left:this.activeCell.column=n(this.activeCell.column)}return this.activateCell(this.activeCell.row,this.activeCell.column)}},{key:"isSolved",value:function(){return this.rows.every(function(e){return e.getCells().every(function(e){return e.isSolved()})})}},{key:"getCreationTimestamp",value:function(){return this.createdAt}}],[{key:"create",value:function(t){var n=new e;return n.difficulty=t,n.createdAt=Date.now(),n.data=R.map(function(e){return e.map(function(e){return[e,!0]})}),n.generateSudoku(),n}}]),e}(),x={difficulty:f.Easy,sudoku:{past:[],current:z.create(f.Easy),future:[]},noteMode:!1},V=[],I=[];var T=Object(v.b)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(h.a)({},e,{difficulty:t.payload,sudoku:{past:[],current:z.create(t.payload),future:[]}});case m:return Object(h.a)({},e,{sudoku:{past:[],current:z.create(e.difficulty),future:[]}});case y:return Object(h.a)({},e,{sudoku:Object(h.a)({},e.sudoku,{current:e.sudoku.current.validate()})});case k:return Object(h.a)({},e,{sudoku:Object(h.a)({},e.sudoku,{current:e.sudoku.current.activateCell(t.payload.row,t.payload.column)})});case g:return console.log(V,I),Object(h.a)({},e,{sudoku:{past:[].concat(Object(d.a)(e.sudoku.past),[e.sudoku.current]),current:e.sudoku.current.setDigit(t.payload.digit,e.noteMode),future:[]}});case w:return console.log(V,I),Object(h.a)({},e,{sudoku:{past:[].concat(Object(d.a)(e.sudoku.past),[e.sudoku.current]),current:e.sudoku.current.removeDigit(),future:[]}});case b:return Object(h.a)({},e,{sudoku:Object(h.a)({},e.sudoku,{current:e.sudoku.current.navigate(t.payload.direction)})});case C:return Object(h.a)({},e,{noteMode:t.payload?t.payload.value:!e.noteMode});case E:if(!e.sudoku.past.length)return e;var n=e.sudoku.past.slice(-1)[0];return Object(h.a)({},e,{sudoku:{past:e.sudoku.past.slice(0,-1),current:n,future:[].concat(Object(d.a)(e.sudoku.future),[e.sudoku.current])}});case O:if(!e.sudoku.future.length)return e;var a=e.sudoku.future.slice(-1)[0];return Object(h.a)({},e,{sudoku:{past:[].concat(Object(d.a)(e.sudoku.past),[e.sudoku.current]),current:a,future:e.sudoku.future.slice(0,-1)}});default:return e}}});var L=n(6),G=n(5),U=n(7),H=(n(30),n(31),n(32),n(33),function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(G.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"SudokuCell-container ".concat(this.calculateClasses()),style:this.calculateStyles(),ref:"cell",onClick:function(){return e.handleClick()}},this.renderContent())}},{key:"renderContent",value:function(){var e=this.props.cell.getValue();if(e)return i.a.createElement("span",{className:"SudokuCell-value"},e);var t=this.props.cell.getNotes(),n="".concat(.76*Math.ceil(this.props.size/3),"px");return i.a.createElement("div",{className:"SudokuCell-notes"},t.map(function(e,t){return i.a.createElement("span",{className:"SudokuCell-note",key:t,style:{fontSize:n}},e?t+1:"")}))}},{key:"handleClick",value:function(){this.props.toggleCell(this.props.cell.getRow(),this.props.cell.getColumn())}},{key:"calculateStyles",value:function(){var e="".concat(this.props.size,"px");return{height:e,width:e,fontSize:"".concat(Math.floor(.68*this.props.size),"px")}}},{key:"calculateClasses",value:function(){var e=this.props.cell,t=e.getRow(),n={"even-block-cell":e.getBlock()%2===0,"given-cell":e.isGiven(),"invalid-cell":!0!==e.isValid(),"active-cell":e.isActive()};return Object(d.a)(Array(10)).forEach(function(e,a){return n["row-".concat(a,"-cell")]=t===a}),Object.keys(n).filter(function(e){return n[e]}).join(" ")}}]),t}(a.Component)),B=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(G.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"SudokuRow-container",style:this.getRowStyle()},this.renderRow())}},{key:"getRowStyle",value:function(){return{width:"".concat(this.props.rowSize,"px"),height:"".concat(this.getCellSize(),"px")}}},{key:"renderRow",value:function(){var e=this;return this.props.row.getCells().map(function(t,n){return i.a.createElement(H,Object.assign({},e.props,{cell:t,size:e.getCellSize(),key:n}))})}},{key:"getCellSize",value:function(){return this.props.rowSize/9}}]),t}(a.Component),W=(n(34),100),_=function(e){return i.a.createElement("div",{className:"Input-container",style:{height:"".concat(W,"px")}},i.a.createElement("div",{className:"Input-numbers"},Object(d.a)(Array(10).keys()).slice(1).map(function(t){return i.a.createElement("button",{key:t,onClick:function(){return e.setDigit(t)}},t)})),i.a.createElement("div",{className:"Input-utils"},i.a.createElement("button",{onClick:function(){return e.undo()}},"Undo"),i.a.createElement("button",{className:e.noteMode?"active":"",onClick:function(){return e.toggleNoteMode()}},"Note"),i.a.createElement("button",{onClick:function(){return e.removeDigit()}},"Clear"),i.a.createElement("button",{onClick:function(){return e.redo()}},"Redo")))},F=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(L.a)(this,Object(G.a)(t).call(this,e))).containerRef=void 0,n.setCellSize=function(){var e=n.containerRef.current;if(e){var t=e.getBoundingClientRect(),a=t.height-W,i=t.width,r=a<i?a:i,o=9*Math.floor(r/9);n.setState({rowSize:o})}else requestAnimationFrame(function(){n.setCellSize()})},n.containerRef=i.a.createRef(),n.state={rowSize:0},n}return Object(U.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"Sudoku-container",ref:this.containerRef,style:this.calculateStyles()},this.renderRows(),this.renderSolvedOverlay())}},{key:"calculateStyles",value:function(){return this.state.rowSize?{height:"".concat(this.state.rowSize,"px")}:{}}},{key:"componentDidMount",value:function(){this.setCellSize()}},{key:"renderRows",value:function(){var e=this;return this.state.rowSize?this.props.sudoku.getRows().map(function(t,n){return i.a.createElement(B,Object.assign({row:t,key:n,rowSize:e.state.rowSize},e.props))}):null}},{key:"renderSolvedOverlay",value:function(){var e=this;if(!this.props.sudoku.isSolved())return null;var t=this.getDifficultyText(),n=Date.now()-this.props.sudoku.getCreationTimestamp();return i.a.createElement("div",{className:"Sudoku-solved",style:{width:"".concat(this.state.rowSize,"px"),height:"".concat(this.state.rowSize,"px"),marginLeft:"-".concat(this.state.rowSize/2,"px")}},i.a.createElement("div",{className:"Sudoku-solved-message"},i.a.createElement("h1",null,"You solved ",t," puzzle!"),i.a.createElement("p",null,"Ellapsed time: ",i.a.createElement("span",{className:"Sudoku-ellapsed"},this.formatMillisecons(n))),i.a.createElement("button",{onClick:function(){return e.props.createNewGame()}},"Start a new game")))}},{key:"formatMillisecons",value:function(e){var t=function(e){return Math.round(e).toString().padStart(2,"0")},n=t(e/1e3%60),a=t(e/6e4%60),i=t(e/36e5%24);return"".concat(i,":").concat(a,":").concat(n)}},{key:"getDifficultyText",value:function(){switch(this.props.difficulty){case f.VeryEasy:return"a very easy";case f.Easy:return"an easy";case f.Normal:return"a normal";case f.Hard:return"a hard";case f.VeryHard:return"a very hard";case f.Insane:return"an insane";default:return"an unknown"}}}]),t}(a.Component),K=(n(35),[{label:"Very Easy",value:f.VeryEasy},{label:"Easy",value:f.Easy},{label:"Normal",value:f.Normal},{label:"Hard",value:f.Hard},{label:"Very Hard",value:f.VeryHard},{label:"Insane",value:f.Insane}]),J=function(e){return i.a.createElement("select",{className:"Options-difficulty",value:e.difficulty,onChange:function(t){var n=+t.target.value;e.changeDifficulty(n)}},K.map(function(e){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))},P=function(e){return i.a.createElement("div",{className:"Options-container"},i.a.createElement("button",{className:"Options-new",onClick:e.createNewGame},"New Game"),i.a.createElement("button",{className:"Options-validate",onClick:e.validateSolution},"Validate"),i.a.createElement(J,e))};var Y=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(L.a)(this,(e=Object(G.a)(t)).call.apply(e,[this].concat(i)))).handleKeyboard=function(e){var t=e.which;t>=49&&t<=57?n.props.setDigit(t-48):8===t||2===t?n.props.removeDigit():37===t?n.props.navigateCells(s.Left):38===t?n.props.navigateCells(s.Up):39===t?n.props.navigateCells(s.Right):40===t?n.props.navigateCells(s.Down):32===t?n.props.toggleNoteMode():27===t&&n.props.toggleNoteMode(!1)},n}return Object(U.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h1",null,"Sudoku")),i.a.createElement(P,this.props),i.a.createElement("div",{className:"App-content"},i.a.createElement(F,this.props),i.a.createElement(_,this.props)))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyboard)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboard)}}]),t}(a.Component),q=Object(u.b)(function(e){return{sudoku:e.game.sudoku.current,difficulty:e.game.difficulty,noteMode:e.game.noteMode}},{changeDifficulty:function(e){return{type:p,payload:e}},createNewGame:function(){return{type:m}},validateSolution:function(){return{type:y}},toggleCell:function(e,t){return{type:k,payload:{row:e,column:t}}},setDigit:function(e){return{type:g,payload:{digit:e}}},removeDigit:function(){return{type:w}},navigateCells:function(e){return{type:b,payload:{direction:e}}},toggleNoteMode:function(e){return void 0!==e?{type:C,payload:{value:e}}:{type:C}},undo:function(){return{type:E}},redo:function(){return{type:O}}})(Y),$=Object(v.c)(T);o.a.render(i.a.createElement(function(){return i.a.createElement(u.a,{store:$},i.a.createElement(q,null))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sudoku",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/sudoku","/service-worker.js");c?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):l(t,e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.3cd58aab.chunk.js.map